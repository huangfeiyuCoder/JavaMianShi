<a name="qtgnF"></a>
# éè¿è¡Œæ—¶
ä¸»è¦èŠèŠï¼šä»£ç ç¼–è¯‘ï¼Œç±»åŠ è½½ï¼ŒJITåŠæ—¶ç¼–è¯‘ï¼ŒJavaå¯¹è±¡åˆ›å»ºè¿‡ç¨‹
<a name="etcHE"></a>
## ä»£ç ç¼–è¯‘
javaæ–‡ä»¶é€šè¿‡JavaCç¼–è¯‘ï¼Œç»å†è¯­æ³•è§£æå™¨ï¼Œè¯­æ„è§£æå™¨ç­‰ï¼Œå˜æˆclasså­—èŠ‚ç æ–‡ä»¶ã€‚<br />è¿™é‡Œè¿˜å¯ä»¥é€šè¿‡JavaPåç¼–è¯‘æˆJavaæ–‡ä»¶ï¼Œè¿™æ ·å°±è¡ç”Ÿå‡ºä¸€ä¸ªé—®é¢˜ï¼Œæ‰“åŒ…ä¹‹åçš„ä»£ç å®‰å…¨é—®é¢˜ï¼Ÿ<br />å…¶å®æœ‰é‚£ç§åŠ å¯†ç”Ÿæˆjarçš„å·¥å…·ï¼Œä¸€èˆ¬æ˜¯é’ˆå¯¹ç±»åŠ è½½çš„è¿‡ç¨‹å…¥æ‰‹ï¼Œè‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œå®ç°æºæ–‡ä»¶çš„åŠ è§£å¯†ã€‚<br />å…·ä½“å·¥å…·Githubä¸Šå¤šçš„æ˜¯ï¼Œè¿™é‡Œä¸å¤šBBäº†ï¼Œäº†è§£ä¸€ä¸‹å°±è¡Œã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634039321737-1413adaf-d256-48d9-af70-772ec2d2acde.png#clientId=ue4769271-855f-4&from=paste&height=252&id=u00b4f075&margin=%5Bobject%20Object%5D&name=image.png&originHeight=292&originWidth=647&originalType=binary&ratio=1&size=87100&status=done&style=none&taskId=u24219f72-9610-4d99-9231-76b1cbd48f6&width=558.4942932128906)
<a name="cDpl8"></a>
## ç±»åŠ è½½å™¨
<a name="vdIzN"></a>
### classæ–‡ä»¶åŠ è½½è¿‡ç¨‹

1. ä»ç£ç›˜ä¸­æ‹¿åˆ°æ–‡ä»¶æµ
1. å°†ç£ç›˜æ–‡ä»¶é™æ€ç»“æ„è½½å…¥å†…å­˜æ–¹æ³•åŒºï¼ˆå…ƒç©ºé—´ï¼‰ï¼Œè½¬æ¢ä¸ºè¿è¡Œæ—¶æ•°æ®ç»“æ„ã€Šç±»ä¿¡æ¯ã€‹
1. æŠŠè½½å…¥åçš„ç±»ä¿¡æ¯è¿›è¡Œç»„è£…ï¼Œåœ¨å †ç©ºé—´ä¸­ç”Ÿæˆç±»å¯¹è±¡ï¼ˆclasså¯¹è±¡ï¼‰ï¼Œåšä¸ºæ•°æ®å…¥å£ã€‚

![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634039371655-782c517f-27e8-49ec-a66b-73b576c1843e.png#clientId=ue4769271-855f-4&from=paste&height=514&id=u7d804f46&margin=%5Bobject%20Object%5D&name=image.png&originHeight=503&originWidth=757&originalType=binary&ratio=1&size=426104&status=done&style=none&taskId=ub2878e9e-086a-47a3-98f2-b206ee40ee4&width=773.48291015625)<br />ç®€å•æ¥è¯´ï¼š<br />åŒäº²å§”æ´¾æœºåˆ¶ï¼šå°±æ˜¯æ‹¿åˆ°å­—èŠ‚ç ä¿¡æ¯ä¹‹åä¸ä¼šç›´æ¥åŠ è½½ï¼Œä¼šä¸¢ç»™çˆ¶ç±»å»åŠ è½½ï¼Œç›´åˆ°æ²¡æœ‰ç¬¦åˆåŠ è½½çš„çˆ¶ç±»ä¸ºæ­¢ï¼Œè¿™æ ·çš„å¥½å¤„å°±æ˜¯é¿å…åŒä¸€ä¸ªæ–‡ä»¶å‡ºç°é‡å¤åŠ è½½çš„æƒ…å†µã€‚<br />ä½†æ˜¯åœ¨Tomcaté‡Œé¢çš„åŠ è½½æœºåˆ¶æ˜¯è¿èƒŒåŒäº²å§”æ´¾åŸåˆ™çš„ï¼Œå› ä¸ºæœ‰å¯èƒ½ä¸€ä¸ªTomcatå®¹å™¨é‡Œé¢è¦éƒ¨ç½²å¤šä¸ªç³»ç»Ÿï¼Œè¿™æ ·ä¸åŒç³»ç»Ÿé‡Œé¢ä¼šæœ‰åŒåçš„æ–‡ä»¶ï¼Œå°±ä¼šå‡ºç°åŠ è½½æ··ä¹±ã€‚

<a name="fPAmv"></a>
## JITåŠæ—¶ç¼–è¯‘
![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634040021554-3cc00aed-93fb-4ab3-a532-c7296d0e957b.png#clientId=ue4769271-855f-4&from=paste&height=188&id=uc859439f&margin=%5Bobject%20Object%5D&name=image.png&originHeight=197&originWidth=832&originalType=binary&ratio=1&size=353103&status=done&style=none&taskId=ub5088658-35d6-40de-a43f-d46b451c1a0&width=791.9857788085938)
<a name="zBnBy"></a>
### ç®€å•æ¥è¯´
HotSpotä¸­çš„Javaç¨‹åºé€šå¸¸æƒ…å†µä¸‹éƒ½æ˜¯é€šè¿‡è§£é‡Šå™¨ï¼Œä¸€è¾¹è§£é‡Šï¼Œä¸€è¾¹æ‰§è¡Œï¼Œå¹¶ä¸æ˜¯å…¨éƒ¨æŠŠClasså­—èŠ‚ç æ–‡ä»¶å…¨éƒ¨åŠ è½½è¿›å»ã€‚ä¹Ÿä¸æ˜¯æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™æ‰è§£é‡ŠåŠ è½½ï¼Œé‡Œé¢æœ‰ä¸ªçƒ­ç‚¹ä»£ç æ£€æµ‹æœºåˆ¶ï¼Œå½“éƒ¨åˆ†ä»£ç è¢«è¯†åˆ«ä¸ºçƒ­ç‚¹ä»£ç å°±ä¼šæå‰åŠ è½½å˜æˆæœºå™¨ç ã€‚

**å…¶å®JITç¼–è¯‘åªæ˜¯ä¸€ä¸ªç»Ÿç§°ï¼Œå…·ä½“è¦çœ‹jvmæ˜¯clientç«¯è¿˜æ˜¯serverç«¯çš„ï¼Œä¸åŒçš„ç«¯ä¼šåˆ†ä¸ºC1ï¼ŒC2ç¼–è¯‘å™¨**<br />C1:è¿½æ±‚ç¼–è¯‘é€Ÿåº¦ï¼Œ  C2:è¿½æ±‚ç¼–è¯‘è´¨é‡

**è®°å¾—ä»¥å‰æœ‰ä¸ªæ¦‚ç‡å« codeCache ç©ºé—´ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æ”¾è¿™ç©æ„çš„ã€‚**
> ç®€è¨€ä¹‹codeCacheæ˜¯å­˜æ”¾JITç”Ÿæˆçš„æœºå™¨ç (native code)ã€‚å½“ç„¶JNI(javaæœ¬åœ°æ¥å£)çš„æœºå™¨ç ä¹Ÿæ”¾åœ¨codeCacheé‡Œï¼Œä¸è¿‡JITç¼–è¯‘ç”Ÿæˆçš„native codeå ä¸»è¦éƒ¨åˆ†ã€‚
> éƒ½æ˜¯å±äºéå †ç©ºé—´ã€‚

![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634040039976-951c8571-34d8-4adb-84d2-ea92ae30097a.png#clientId=ue4769271-855f-4&from=paste&height=384&id=u415afccb&margin=%5Bobject%20Object%5D&name=image.png&originHeight=295&originWidth=393&originalType=binary&ratio=1&size=99663&status=done&style=none&taskId=u9a66cec7-551c-4864-bb60-e3e96967768&width=511.48577880859375)
<a name="xAHxo"></a>
### å‡ ä¸ªå…³é”®å­—
æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨ï¼šé¡¾åæ€ä¹‰å°±æ˜¯è®°å½•è°ƒç”¨æ¬¡æ•°ã€‚<br />å›è¾¹è®¡æ•°å™¨ï¼šç»Ÿè®°æ–¹æ³•ä½“å†…çš„å¾ªç¯ä½“ã€‚<br />è€Œä¸”ï¼šç¼–è¯‘çš„æœ€å°å•å…ƒæ˜¯æ–¹æ³•ï¼Œè¿è¡Œå‰è¦å…ˆæ£€æŸ¥æ˜¯å¦ç¼–è¯‘ã€‚<br />å¦‚æœç¼–è¯‘äº†å°±ç›´æ¥è¿è¡Œã€‚<br />å¦‚æœæ²¡æœ‰ç¼–è¯‘å°±éœ€è¦å…ˆç»è¿‡JITçš„åŠ è½½ï¼Œæäº¤OSRç¼–è¯‘è¯·æ±‚ï¼Œæ‰§è¡Œç¼–è¯‘ã€‚

![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634040055360-68db4da8-c25e-473a-8e9c-268f8f7ddaee.png#clientId=ue4769271-855f-4&from=paste&height=345&id=ub7dbde46&margin=%5Bobject%20Object%5D&name=image.png&originHeight=300&originWidth=443&originalType=binary&ratio=1&size=170120&status=done&style=none&taskId=u467db7a9-47cd-473d-ad47-a6f84aa6a34&width=509.49147033691406)<br />**è®°ä½å‡ ä¸ªå…³é”®ç‚¹ï¼š**

- æ–¹æ³•æ˜¯ç¼–è¯‘çš„æœ€å°å•å…ƒã€‚
- JITé‡Œé¢ä¼šåš**â€œçƒ­ç‚¹æµ‹æ¢â€**ï¼Œé€šè¿‡æŠ€æœ¯å™¨çš„æ–¹å¼è®°å½•æ–¹æ³•çš„æ‰§è¡Œæ¬¡æ•°ç­‰ã€‚
- JITå†…éƒ¨ä¼šåš**â€œæ ˆä¸Šæ›¿æ¢â€**ï¼Œé€šæŠŠåŸæœ¬çš„æ–¹æ³•è°ƒç”¨åœ°å€æ›¿æ¢ä¸ºç¼–è¯‘åçš„æ–¹æ³•åœ°å€ã€‚

<a name="N611v"></a>
## Javaå¯¹è±¡åˆ›å»ºçš„è¿‡ç¨‹
![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634042769951-bbd1c03e-f254-4eb9-9b75-84c47bda9b93.png#clientId=ue4769271-855f-4&from=paste&height=579&id=ub0316f28&margin=%5Bobject%20Object%5D&name=image.png&originHeight=557&originWidth=823&originalType=binary&ratio=1&size=743127&status=done&style=none&taskId=u0c99f859-3cf0-4a9f-8977-e247f6b6a89&width=854.9971313476562)

<a name="eQ8x5"></a>
### è¿™é‡Œå…ˆè¦è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯TLABï¼Ÿ
> TLABçº¿ç¨‹æœ¬åœ°åˆ†é…ç¼“å­˜åŒºæ˜¯ä»€ä¹ˆï¼Ÿå·¥ä½œåŸç†åˆ†æï¼ŒTLABå…¨ç§°Thread Local Allocation Bufferï¼Œå³**çº¿ç¨‹æœ¬åœ°åˆ†é…ç¼“å­˜åŒº**ï¼Œæ˜¯ä¸€ä¸ªçº¿ç¨‹ä¸“ç”¨çš„å†…å­˜åˆ†é…åŒºåŸŸã€‚åœ¨çº¿ç¨‹åˆå§‹åŒ–æ—¶ï¼Œè™šæ‹Ÿæœºä¼šä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…ä¸€å—TLABç©ºé—´ï¼Œåªç»™å½“å‰çº¿ç¨‹ä½¿ç”¨ã€‚

**ç®€å•æ¥è¯´ï¼š**<br />å°±æ˜¯JVMä¸ºæ¯ä¸ªçº¿ç¨‹åœ¨å †å†…å­˜ä¸­åˆ’åˆ†çš„ä¸€ä¸ªâ€œ**å¯åˆ†é…ç©ºé—´**â€ï¼Œè¿™æ ·çš„å¥½å¤„å°±æ˜¯ä¸ºäº†é¿å…å¤šçº¿ç¨‹ä¸‹ï¼Œåœ¨å †ç©ºé—´ä¸Šçš„åˆ†é…é”™ä¹±é—®é¢˜ã€‚å…¶å®å†…å­˜è¯»å–æ˜¯å…±äº«çš„ï¼Œåªæ˜¯æœ‰ç‹¬æœ‰çš„**åˆ†é…æƒ**ã€‚

TLABç©ºé—´çš„å†…å­˜ä¹Ÿéå¸¸å°ï¼Œé»˜è®¤ä»…å æœ‰æ•´ä¸ªEdenç©ºé—´çš„1%ï¼Œæ‰€ä»¥ä¸€äº›å¤§å¯¹è±¡æ˜¯ä¸ç»è¿‡TLABåŒºåŸŸåˆ†é…çš„ï¼Œè¿™ç§åˆ†é…å°±éœ€è¦è¿›è¡ŒåŒæ­¥æ§åˆ¶ï¼Œæ‰€ä»¥ç»å¸¸è¯´çš„å°çš„å¯¹è±¡æ¯”å¤§çš„å¯¹è±¡åˆ†é…èµ·æ¥æ›´åŠ é«˜æ•ˆã€‚

è¿™æ ·å¯ä»¥æå‡åˆ†é…æ•ˆç‡ï¼Œä¸”ä¸å½±å“å¯¹è±¡çš„ç§»åŠ¨å’Œå›æ”¶ã€‚<br />ä¹Ÿå¯ä»¥é€šè¿‡é€‰é¡¹-XX:TLABWasteTargetPercentè®¾ç½®TLABç©ºé—´æ‰€å ç”¨Edenç©ºé—´çš„ç™¾åˆ†æ¯”å¤§å°ã€‚

<a name="mz5Ow"></a>
### Javaå¯¹è±¡åˆ›å»ºè¿‡ç¨‹ï¼Ÿ
è¿™é‡Œå…¶å®ä¹Ÿæ˜¯è¿è¡Œæ—¶å®ç°çš„ï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿é…åˆé˜…è¯»ï¼Œæ’ç‰ˆå°±å°±åŠ åœ¨è¿™é‡Œã€‚
> **new ->  ç±»åŠ è½½æ£€æµ‹  ->  å¯¹è±¡å†…å­˜åˆ†é…  ->  å€¼åˆå§‹åŒ–    ->  è®¾ç½®å¯¹è±¡å¤´   ->  æ‰§è¡Œinit æ–¹æ³•ã€‚**

<br />
<a name="wgmFD"></a>
#### é‡åˆ°new æŒ‡ä»¤æ—¶
å…ˆçœ‹æ˜¯å¦èƒ½åœ¨å¸¸é‡æ± ä¸­æ‰¾å®šä½ **ç±»çš„ç¬¦å·å¼•ç”¨ **

<a name="yBnAR"></a>
#### ç±»åŠ è½½æ£€æµ‹  
åçœ‹æ¶‰åŠçš„classç›¸ä¿¡æ˜¯å¦å·²ç»åŠ è½½ã€‚

<a name="Udpl2"></a>
#### å¯¹è±¡å†…å­˜åˆ†é…
åˆ†é…å †å†…å­˜ï¼Œå…·ä½“åˆ†é…æ–¹å¼çœ‹å †çš„æ•´é½æ€§ï¼Œè¿™ä¸ªğŸˆ¶ï¸GCæœºåˆ¶å†³å®šã€‚<br />åˆ†é…æ–¹å¼ï¼š<br />1.æŒ‡é’ˆç¢°æ’ï¼ˆå †æ•´é½çš„è¯ï¼‰ å•¥å«æŒ‡é’ˆç¢°æ’ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºæŒ‡é’ˆç§»åŠ¨ï¼ŒæŒ‡å‘ç©ºé—²å†…å­˜åœ°å€å°±è¡Œã€‚ã€‚<br />2.ç©ºé—²å†…å­˜åˆ—è¡¨ ï¼ˆå †ä¸æ•´é½çš„è¯ï¼‰å°±æ˜¯ä¸€å¼ è®°å½•ç©ºé—²å†…å­˜çš„åˆ—è¡¨ï¼Œç›¸å½“äºå¯ç”¨åº“å­˜è´¦æœ¬ã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634045363659-f4cc0c14-6c1d-4654-96da-42182064de3c.png#clientId=ue4769271-855f-4&from=paste&height=280&id=u26aa698e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=173&originWidth=321&originalType=binary&ratio=1&size=75259&status=done&style=none&taskId=ua34244fd-4315-480a-968e-32ff169d274&width=519.4971466064453)

![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634045376417-37975d70-d9fe-4432-a929-1f9c6b00c33f.png#clientId=ue4769271-855f-4&from=paste&height=267&id=u9db7e007&margin=%5Bobject%20Object%5D&name=image.png&originHeight=160&originWidth=336&originalType=binary&ratio=1&size=69518&status=done&style=none&taskId=u2915c73a-4400-4426-9f83-82212506db4&width=559.9885864257812)<br />**åˆ†é…æ—¶å¹¶å‘é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ**ï¼š<br />1.CASè‡ªæ—‹é”ï¼ˆæ¯”è¾ƒäº¤æ¢æœºåˆ¶ï¼Œä¹è§‚é”ï¼‰  è¿™å°±æ˜¯ä¸Šé¢æ‰€è¯´çš„å¤§å¯¹è±¡åˆ†é…æœºåˆ¶ã€‚ã€‚ï¼Ÿ<br />2.TLABæœ¬åœ°å†…å­˜ï¼ŒæŒ‡å®šä¸€å—åŒºåŸŸçš„åˆ†é…æƒé™ã€‚

<a name="GKq2F"></a>
#### å€¼åˆå§‹åŒ–
ä¸ºå¯¹è±¡çš„å±æ€§åˆ†é…ä¸€äº›åˆå§‹åŒ–å€¼ï¼Œæ¯”å¦‚int = 0, long = 0 ç­‰é»˜è®¤å€¼ã€‚

<a name="s1lsp"></a>
#### è®¾ç½®å¯¹è±¡å¤´
å¡«å……å¯¹è±¡å¤´ä¿¡æ¯ï¼Œæ¯”å¦‚HashCode, GC å¹´é¾„ï¼Œé”æ ‡è®°ï¼Œé”ä¿¡æ¯ï¼ŒClassç±»å‹æŒ‡é’ˆç­‰ç­‰ã€‚ã€‚<br />è¯´ç™½äº†å°±æ˜¯å†…å­˜ä¹Ÿæ•´å¥½äº†ï¼Œåˆå§‹åŒ–ä¹Ÿæ­£å¥½äº†ï¼Œè¦å¤ç›˜è®°å½•è‡ªå·±çš„è´¢äº§ä¿¡æ¯äº†ã€‚ã€‚
<a name="Zmei9"></a>
#### æ‰§è¡ŒInitæ–¹æ³•
æœ€åä¸€æ­¥æ‰§è¡Œinitå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œä¸»è¦å¯¹å±æ€§èµ‹å€¼ã€‚

ä»”ç»†ç†è§£ä¸‹é¢åˆ†é…è¿‡ç¨‹ï¼š  ç»†å“ï¼ï¼ï¼<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634044665010-6c7ce3bb-5a86-4262-a429-6cd6674484e0.png#clientId=ue4769271-855f-4&from=paste&height=138&id=u06422a5e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=147&originWidth=827&originalType=binary&ratio=1&size=241849&status=done&style=none&taskId=u8cdf39cc-eee9-4bb8-bc03-1912802ae36&width=776.4942932128906)


<a name="nYVwL"></a>
# è¿è¡Œæ—¶åŒº
ä¸»è¦æŒ‰ç…§ï¼Œçº¿ç¨‹ç§æœ‰åŒºï¼Œå’Œ çº¿ç¨‹å…±äº«åŒº åˆ’åˆ†ã€‚<br />é‡Œé¢æœ‰æ ˆï¼Œå’Œå †ï¼Œå…ƒç©ºé—´ï¼Œä¸»è¦æ˜¯è¿™ä¸‰å—åŒºåŸŸã€‚
<a name="UJIoB"></a>
## çº¿ç¨‹ç§æœ‰åŒº
![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634126182037-0e706bcf-818e-4047-8396-0e0484d66477.png#clientId=u3f4b921e-4f2a-4&from=paste&height=731&id=u9b01ce7d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=904&originWidth=1068&originalType=binary&ratio=1&size=1671625&status=done&style=none&taskId=ua1c491ca-74a5-4694-be41-8be91cce674&width=863.9971313476562)<br />è¯¥åŒºåŸŸï¼šçº¿ç¨‹ç‹¬äº«ï¼Œçº¿ç¨‹å®‰å…¨åŒºåŸŸï¼Œä¸»è¦åŒ…å«ï¼šè™šæ‹Ÿæœºæ ˆï¼Œæœ¬åœ°æ–¹æ³•æ ˆï¼Œç¨‹åºè®¡æ•°å™¨

<a name="OUX4O"></a>
### è™šæ‹Ÿæœºæ ˆ
ä¸»è¦åŒ…å«ï¼šå±€éƒ¨å˜é‡è¡¨ï¼Œæ“ä½œæ•°æ ˆï¼ŒåŠ¨æ€é“¾æ¥è¡¨ï¼Œæ–¹æ³•å‡ºå£ï¼Œç­‰ç­‰ã€‚<br />ä¸€ä¸ªæ–¹æ³•å°±æ˜¯ä¸€ä¸ªæ ˆå¸§<br />è¿™é‡Œæ³¨æ„ï¼Œå¯¹è±¡å¼•ç”¨ä¿¡æ¯å’Œæ•°æ®å­˜å‚¨ï¼Œæ˜¯æ”¾åœ¨å±€éƒ¨å˜é‡è¡¨é‡Œé¢çš„ã€‚<br />ä¸»è¦ç†è§£å±€éƒ¨å˜é‡é‡Œé¢çš„åŒºåŸŸï¼Œï¼ï¼ï¼
<a name="iqDCC"></a>
#### å±€éƒ¨å˜é‡è¡¨
åŒ…å«ï¼šåŸºæœ¬æ•°æ®ç±»å‹æ•°æ®ï¼Œreference, returnAddressï¼Œç­‰ç­‰ã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634126160152-d904aa8f-2aa8-4f92-b2f0-23a1d7325c9c.png#clientId=u3f4b921e-4f2a-4&from=paste&height=136&id=u8dbf06d5&margin=%5Bobject%20Object%5D&name=image.png&originHeight=137&originWidth=466&originalType=binary&ratio=1&size=143206&status=done&style=none&taskId=u20b481c9-9e3d-49a7-91ef-21b98d073e9&width=463.3267059326172)<br />ç®€å•æ¥è¯´ï¼Œé‡Œé¢å­˜æ”¾åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå’Œå¼•ç”¨å¯¹è±¡çš„ä¿¡æ¯ï¼Œå…¶ä¸­å¼•ç”¨å¯¹è±¡ä¿¡æ¯ã€‚<br />è€Œå¼•ç”¨å¯¹è±¡æ–¹å¼åˆåˆ†ä¸ºä¸¤ç§ï¼š<br />**å¥æŸ„æ± å¼•ç”¨ **ï¼š å¯ç†è§£ä¸ºç›´æ¥è¿æ¥çš„æ˜¯å †å†…å­˜ä¸­çš„å¥æŸ„<br />**åœ°å€å¼•ç”¨**ï¼šå¯ç†è§£ä¸ºç›´æ¥è¿æ¥çš„æ˜¯å¯¹è±¡çš„ç‰©ç†åœ°å€<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634126470453-42533d0f-01f3-4d12-9c40-ac89c53b2dbd.png#clientId=u3f4b921e-4f2a-4&from=paste&height=48&id=ub41fcf44&margin=%5Bobject%20Object%5D&name=image.png&originHeight=55&originWidth=471&originalType=binary&ratio=1&size=28216&status=done&style=none&taskId=u43b1b4be-dfc9-4ded-b4d8-317ce4b8df9&width=410.98863220214844)
> å¯¹è±¡åˆ›å»ºå‡ºæ¥ä¹‹åï¼Œå¯ä»¥é€šè¿‡æ ˆä¸Šçš„ reference æ•°æ®æ¥æ“ä½œå †ä¸Šçš„å¯¹è±¡äº†ï¼Œ
> è®¿é—®ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼š**å¥æŸ„å’Œç›´æ¥æŒ‡é’ˆ**
> å¥æŸ„ï¼šjavaå †ä¸­æœ‰ä¸€å—åŒºåŸŸå«åšå¥æŸ„æ± ï¼Œå¥æŸ„æ± å­˜å‚¨çš„æ˜¯å¯¹è±¡çš„å¥æŸ„ä¿¡æ¯ï¼Œreferenceå­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€ã€‚è¿™ç§æ–¹å¼çš„å¥½å¤„å°±æ˜¯å³ä½¿å¯¹è±¡åœ¨å †ä¸­é¢‘ç¹åœ°ç§»åŠ¨ï¼Œæ”¹å˜çš„ä¹Ÿåªæ˜¯å¥æŸ„ä¸­çš„å®ä¾‹æ•°æ®æŒ‡é’ˆï¼Œè€Œå¯¹æ ˆä¸­çš„referenceæ•°æ®ä¸å½±å“ï¼›
> ç›´æ¥æŒ‡é’ˆï¼š è¿™ç§æ–¹å¼referenceä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€ï¼›
> å¯¹æ¯”ï¼šè¿™ä¸¤ç§æ–¹å¼å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œå…¶ä¸­ç›´æ¥æŒ‡é’ˆä¼˜ç‚¹å°±æ˜¯è®¿é—®é€Ÿåº¦å¿«ï¼Œå°ç¼ºç‚¹æ˜¯å¯¹è±¡å®ä¾‹æ•°æ®é¢‘ç¹ç§»åŠ¨ï¼Œç»´æŠ¤è¿™ä¸ªç›´æ¥å†…å­˜åœ°å€ä¹Ÿéœ€è¦å¼€é”€ï¼›å¥æŸ„çš„ä¼˜ç‚¹å°±æ˜¯ç¨³å®šï¼Œä½†æ˜¯è¦åœ¨å †ä¸­åˆ›å»ºç»´æŠ¤ä¸€ä¸ªå¥æŸ„æ± ï¼Œè¿™æ ·è®¿é—®æ€§èƒ½å¯èƒ½ä¼šç¨å·®ã€‚


<a name="iLiTP"></a>
#### æ“ä½œæ•°æ ˆ
å¯ä»¥ç†è§£ä¸ºPCå¯„å­˜å™¨ï¼Œå°±æ˜¯CPUè¿è¡Œæ—¶å¯èƒ½éœ€è¦ä¸´æ—¶å­˜å‚¨çš„ä¸€äº›é¬¼ä¸œè¥¿ã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634127018193-596cd2fe-1fdd-4b1b-983a-0f333a9cdc59.png#clientId=u3f4b921e-4f2a-4&from=paste&height=62&id=ue6499aff&margin=%5Bobject%20Object%5D&name=image.png&originHeight=52&originWidth=448&originalType=binary&ratio=1&size=57681&status=done&style=none&taskId=u82a58b31-81a2-481a-ae7c-6cf3dedd9e5&width=535.3323822021484)

<a name="xGeO7"></a>
#### åŠ¨æ€é“¾æ¥è¡¨
OOPæ ¸å¿ƒæ€æƒ³:å°è£…,ç»§æ‰¿,å¤šæ€<br />å¤§æ¦‚æ„æ€å°±æ˜¯ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™æ— æ³•ç¡®å®šå…·ä½“çš„å¯¹è±¡ç±»å‹ï¼Œéœ€è¦åœ¨è¿è¡Œçš„æ—¶å€™æ‰èƒ½ç¡®å®šå¯¹è±¡ã€‚<br />è¿™å—åŠ¨æ€é“¾æ¥è¡¨åŒºåŸŸï¼Œå°±æ˜¯è§£å†³è¿™å—åŒºåŸŸçš„ã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634127063203-12a1cf59-a1b2-4e35-afd3-0a3a5138f729.png#clientId=u3f4b921e-4f2a-4&from=paste&height=78&id=u2f4f5c0b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=73&originWidth=439&originalType=binary&ratio=1&size=35399&status=done&style=none&taskId=u821644ea-41df-4796-95d7-acc0eff8df2&width=471.3210144042969)
<a name="LDFsY"></a>
#### æ–¹æ³•å‡ºå£åŒº
è®°å½•æ–¹æ³•å‡ºæ ˆåœ°å€çš„åŒºåŸŸ<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634127162687-0386686a-2371-4f56-9ff9-9123ec3d6c08.png#clientId=u3f4b921e-4f2a-4&from=paste&height=53&id=u224b4362&margin=%5Bobject%20Object%5D&name=image.png&originHeight=50&originWidth=438&originalType=binary&ratio=1&size=54409&status=done&style=none&taskId=u49dd3a71-8f31-40d5-976e-e9d86d12fe1&width=464.9943084716797)

<a name="C0rvl"></a>
### æœ¬åœ°æ–¹æ³•æ ˆ
ä¸ä¸Šé¢çš„è™šæ‹Ÿæœºæ ˆç±»ä¼¼ï¼Œæ‰§è¡Œä¸€äº›Native æ ‡è®°çš„æ–¹æ³•ï¼Œé‡Œé¢æ˜¯Cï¼ŒC++æ‰§è¡Œçš„ç©ºé—´ã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634127292267-4000a0b7-c522-4866-aa08-aa11dc6e77b2.png#clientId=u3f4b921e-4f2a-4&from=paste&height=58&id=ub7f3c498&margin=%5Bobject%20Object%5D&name=image.png&originHeight=53&originWidth=436&originalType=binary&ratio=1&size=61090&status=done&style=none&taskId=u4b65b0b8-51ad-412f-8cb2-e763834d19a&width=478.3267059326172)
<a name="dZre6"></a>
### ç¨‹åºè®¡æ•°å™¨
å°±æ˜¯CPUæ˜¯æŒ‰æ—¶é—´ç‰‡æ‰§è¡Œçš„ï¼Œå¯èƒ½çº¿ç¨‹è¿è¡Œåˆ°ä¸€åŠå°±è¦åœæ­¢ï¼Œè¿™ç©æ„å°±æ˜¯è®°å½•ä»£ç æŒ‡ä»¤è¿è¡Œåˆ°å“ªä¸ªä½ç½®çš„ã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634127367063-a3710cf5-287d-4fef-8651-19801d237fa4.png#clientId=u3f4b921e-4f2a-4&from=paste&height=123&id=u52e1d448&margin=%5Bobject%20Object%5D&name=image.png&originHeight=91&originWidth=446&originalType=binary&ratio=1&size=118996&status=done&style=none&taskId=u5a8ce33d-3676-4d08-ad40-966a3816d0c&width=604.6647338867188)


<a name="USOGw"></a>
## çº¿ç¨‹å…±äº«åŒº
![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634128391691-e683aabb-928a-426e-bfaa-0714b64ca172.png#clientId=u3f4b921e-4f2a-4&from=paste&height=514&id=u184d29b5&margin=%5Bobject%20Object%5D&name=image.png&originHeight=624&originWidth=1045&originalType=binary&ratio=1&size=959734&status=done&style=none&taskId=u552b257a-9c8f-4955-b7ef-19b4317949f&width=860.9971313476562)<br />æ­¤åŒºåŸŸå¤§åˆ†ä¸ºä¸¤å—åŒºåŸŸï¼š æœ¬åœ°å†…å­˜ï¼Œ ç›´æ¥å†…å­˜ <br />æœ¬åœ°å†…å­˜ï¼š JVMè™šæ‹Ÿæœºä¸­ä½¿ç”¨çš„å†…å­˜ï¼Œé‡Œé¢æœ‰å †ï¼Œæ–¹æ³•åŒºï¼Œå¸¸è¿æ± ç­‰ç­‰ã€‚ã€‚ã€‚<br />ç›´æ¥å†…å­˜ï¼šæ“ä½œç³»ç»Ÿæ‰€ç®¡çš„åŒºåŸŸï¼Œä¹Ÿå¯èƒ½ä¼šå‡ºç°OOMï¼Œç›´æ¥è¢«æ“ä½œç³»ç»Ÿkillæ‰è¿›ç¨‹ã€‚<br />   åœ¨Java1.5åªæœ‰ï¼ŒNIOæ“ä½œç±»é‡Œé¢æœ‰ä¸ªå‡½æ•°byteBuffer()ï¼Œå¯ä»¥ä¾›ç¨‹åºå‘˜ä½¿ç”¨è¿™å—åŒºåŸŸã€‚<br />è¿™é‡Œä¸å¤šé€¼é€¼ï¼Œä¸»è¦è®²è§£æœ¬åœ°å†…å­˜åŒºåŸŸçš„åˆ’åˆ†ã€‚

<a name="nnVgz"></a>
### å…ƒæ•°æ®
Java8ä¹‹åå®šä¹‰çš„å…ƒæ•°æ®åŒºï¼Œå…¶å®é‡Œé¢ä¹Ÿå°±æ˜¯ï¼Œå¸¸é‡æ± ï¼Œæ–¹æ³•åŒºï¼Œéƒ½æ˜¯å±äºæ°¸ä¹…ä»£ï¼Œä¸€èˆ¬ä¸ä¼šè¢«GCæ¸…æ¥šï¼Œå¦‚æœçœŸçš„å› ä¸ºé¢‘ç¹åå°„ç”Ÿæˆclassä¿¡æ¯ï¼Œä¹Ÿæœ‰å¯èƒ½å‡ºç°å†…å­˜ä¸è¶³ï¼Œä¼šè§¦å‘FullGCï¼Œä¹Ÿå¯èƒ½ä¼šå¯¼è‡´OOMã€‚<br />è¿™é‡Œé»˜è®¤çš„ç©ºé—´å¾ˆå°‘ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒçš„JVMå‚æ•°æ¨¡æ¿ä¸­ä¸€èˆ¬éƒ½ä¼šè°ƒæ•´åˆ°200Mã€‚
<a name="Zgu99"></a>
#### å¸¸é‡æ± 
å°±æ˜¯å­˜å‚¨çš„æ˜¯è¿è¡Œæ—¶çš„ä¸€äº›å¸¸é‡ï¼Œæ¯”å¦‚int= 1, int =127 ä¹‹é—´çš„ä¸€äº›åŒºåŸŸã€‚<br />ä¹Ÿæ˜¯å†…å­˜å…±äº«çš„å“¦ã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634128616723-5eb0cd5b-a9e6-4082-943f-d4ceb2437c84.png#clientId=u3f4b921e-4f2a-4&from=paste&height=149&id=ueb901646&margin=%5Bobject%20Object%5D&name=image.png&originHeight=121&originWidth=263&originalType=binary&ratio=1&size=84164&status=done&style=none&taskId=u287193bb-5166-4631-a458-2d36afd736c&width=324.6505432128906)
<a name="Uzp9Y"></a>
#### æ–¹æ³•åŒº
è¯´ç™½äº†å°±æ˜¯å­˜å‚¨ä¸€äº›ï¼Œç±»ç›¸å…³çš„ä¿¡æ¯ï¼ŒClassæ¨¡æ¿ï¼ŒClassä¿¡æ¯ç­‰ç­‰ã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634128603965-38be4309-4f01-4c05-987a-31d2c45a97ae.png#clientId=u3f4b921e-4f2a-4&from=paste&height=130&id=u5663c3b7&margin=%5Bobject%20Object%5D&name=image.png&originHeight=137&originWidth=570&originalType=binary&ratio=1&size=104038&status=done&style=none&taskId=ua10dfdb0-efdc-4b49-9b4e-9a6a5dcd1bf&width=541.9942932128906)
<a name="pZCCA"></a>
### å †ç©ºé—´
å †é‡Œé¢è®¾è®¡çš„å†…å®¹å°±æœ‰ç‚¹å¤šäº†ï¼Œä»€ä¹ˆæ–°è€å¹´ä»£çš„ç©ºé—´åˆ†å¸ƒå•Šï¼ŒGCå›æ”¶ç®—æ³•å•Šï¼Œå¯¹è±¡å†…éƒ¨å­˜å‚¨ç»“æ„å•Šï¼Œåƒåœ¾è¯†åˆ«ç®—æ³•å•Šï¼ŒJVMè°ƒä¼˜å•Šï¼ŒOOMæ’æŸ¥å•Šï¼ŒTLABå•Šï¼Œå¯¹è±¡å¥æŸ„æ± å•Šï¼Œå„ç§ä¹±ä¸ƒå…«ç³Ÿçš„ï¼Œè¿™é‡Œå°±ç®€å•èŠä¸€èŠã€‚<br />ä¸»è¦åˆ†ä¸ºï¼šæ–°ç”Ÿä»£ï¼Œè€å¹´ä»£ï¼ˆä¸€èˆ¬çš„é»˜è®¤å¤§å°æ¯”ä¾‹æ˜¯1ï¼š2 ï¼‰<br />æ–°ç”Ÿä»£åˆ†ä¸ºï¼šEden åŒº å’Œ S1 å’Œ S2 åŒºï¼ˆä¸€èˆ¬é»˜è®¤æ¯”ä¾‹æ˜¯ 8ï¼š1ï¼š1ï¼‰<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634128896026-2abcec37-3ac3-4dbb-9583-13a89cefe230.png#clientId=u3f4b921e-4f2a-4&from=paste&height=270&id=u9ca45eec&margin=%5Bobject%20Object%5D&name=image.png&originHeight=345&originWidth=1030&originalType=binary&ratio=1&size=541616&status=done&style=none&taskId=u7fc3eb5d-beda-40ce-a11f-617f86ce3a9&width=806.3209838867188)

<a name="E219z"></a>
#### æ–°ç”Ÿä»£

æ–°ç”Ÿä»£ä¸»è¦è®°ä½å››å—åŒºåŸŸï¼šEdenåŒºåŸŸï¼ŒS1ï¼ŒS2åŒºåŸŸã€‚<br />**EdenåŒº**åˆåŒ…å«**ï¼š**<br />**å®ä¾‹å¯¹è±¡åŒºåŸŸ**<br />**TLABåˆ†é…åŒº**<br />**å­—ç¬¦å¸¸é‡æ± åŒºåŸŸ**<br />SurvivoråŒºåŒ…å«ï¼šï¼ˆå…¶å®ä¸¤å—åŒºåŸŸä¸€æ ·çš„ï¼Œåªæ˜¯å«æ³•ä¸åŒã€‚ï¼‰<br />S-ToåŒºåŸŸ<br />S-FormåŒºåŸŸ

**EdenåŒºåŸŸ**<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634131851062-cfc43b82-e869-426e-b80f-367b946df602.png#clientId=u3f4b921e-4f2a-4&from=paste&height=288&id=ue71ae26e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=277&originWidth=561&originalType=binary&ratio=1&size=232319&status=done&style=none&taskId=ud1ad6801-64b7-42e7-8a0e-b402a9e0b69&width=582.9801025390625)<br />**E-1. TLABåŒºåŸŸï¼š**<br />**å±äºEdenåŒºåŸŸå†…**<br />ä¸Šé¢è¯´äº†ï¼ŒTLABï¼ˆçº¿ç¨‹æœ¬åœ°å†…å­˜ï¼‰å°±æ˜¯ä¸ºäº†é¿å…çº¿ç¨‹åˆ†é…å¯¹è±¡æ—¶å†…å­˜å†²çªçš„ä¸€ä¸ªåŒºåŸŸï¼Œå°±æ˜¯ä¸ºæ¯ä¸ªçº¿ç¨‹ç»‘å®šäº†å¯¹è±¡åœ°å€çš„åˆ†é…æƒé™åŒºåŸŸã€‚è¿™é‡Œå°±ä¸å¤šBBã€‚

**E-2. å­—ç¬¦ä¸²å¸¸é‡æ± ï¼š**<br />**ä¹Ÿå±äºEdenåŒºåŸŸå†…**<br />å…·ä½“æ˜¯å•¥ç©æ„ï¼Œå‚è€ƒä¸€ä¸‹è¿™ä¸ªåšå®¢ï¼š[https://www.cnblogs.com/weibanggang/p/9457999.html](https://www.cnblogs.com/weibanggang/p/9457999.html)<br />ç›®çš„å°±æ˜¯æŠŠä¸€äº›å¸¸ç”¨çš„å­—ç¬¦ä¸²å¸¸é‡åŠ è½½åˆ°å †EdenåŒºé‡Œï¼Œå‡å°‘å¯¹è±¡åˆ›å»ºçš„æ—¶é—´ï¼Œæé«˜ç©ºé—´åˆ©ç”¨ç‡ã€‚<br />ç®€å•æ¥è¯´ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¸¸é‡æ± å°±æ˜¯ String = "abcde"; çš„æ—¶å€™ï¼Œâ€œabcdeâ€æ˜¯ç›´æ¥å­˜å‚¨åœ¨è¿™å—åŒºåŸŸçš„ã€‚ä½†æ˜¯å¦‚æœæ˜¯new String("abcde"); çš„æ—¶å€™ï¼Œå°±æ˜¯ç›´æ¥å­˜åœ¨Edenå¯¹è±¡é‡Œçš„ã€‚**ç©ºé—´æ¢æ—¶é—´ **çš„æ“ä½œç½¢äº†ï¼ï¼<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634130546303-60f2049a-68ca-4d31-80f7-834de9f315e9.png#clientId=u3f4b921e-4f2a-4&from=paste&height=613&id=ub698b46c&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1402&originWidth=1674&originalType=binary&ratio=1&size=927443&status=done&style=none&taskId=u53a1c213-9ee4-497d-9973-799bf75a3a4&width=731.9971313476562)<br />E-3.å®ä¾‹å¯¹è±¡ï¼š<br />çº¿ç¨‹ç›´æ¥åœ¨EdenåŒºåŸŸåˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œå¯¹è±¡å†…å­˜å— é‡Œé¢åˆåŒ…å«ä¸€å¤§å †ä¸œè¥¿ï¼Œ<br />è¿™é‡Œå°±ç®€å•è¯´ä¸€ä¸‹åŒºåŸŸï¼Œåé¢å•ç‹¬æ‹¿å‡ºä¸€ä¸ªç« èŠ‚æ¥å¤ç›˜è¿™ä¸ªâ€œå¯¹è±¡å—â€çš„çŸ¥è¯†ã€‚

å®ä¾‹å¯¹è±¡å— åŒ…å«ï¼š<br />**å¯¹è±¡å¤´ **åŒ…å«ï¼š<br />markword: é”æ ‡è®°ï¼ŒGCå¹´é¾„ï¼ŒHashç ï¼Œç­‰ç­‰ï¼Œåœ¨32ï¼Œ64ä½ä¸­å­˜å‚¨ç»“æ„è¿˜ä¸åŒã€‚<br />ç±»å‹æŒ‡é’ˆï¼šæŒ‡å‘Classç±»å¯¹è±¡çš„ä¸€ä¸ªæŒ‡é’ˆ<br />æ•°ç»„é•¿åº¦ï¼šæ•°ç»„æ˜¯ä¸€å—ç‰¹æ®ŠåŒºåŸŸï¼Œä¸“é—¨ä¸º æ•°ç»„å¯¹è±¡ å­˜æ”¾å†…å®¹çš„ç©ºé—´ã€‚<br />**å®ä¾‹æ•°æ®**ï¼šå¯¹è±¡çœŸæ­£å­˜å‚¨å†…å®¹çš„ç©ºé—´ã€‚<br />å¡«å……ç‰©ï¼šè™šæ‹Ÿæœºçš„å†…å­˜ç®¡ç†è¦æ±‚**å¯¹è±¡çš„å¤§å°å¿…é¡»æ˜¯8å­—èŠ‚çš„æ•´æ•°å€ï¼Œ**ç”¨æ¥å……æ•°çš„åŒºåŸŸ

![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634131800887-1804dd0b-dae3-44a3-8432-cd9077c72e59.png#clientId=u3f4b921e-4f2a-4&from=paste&height=278&id=ud3c496d4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=193&originWidth=242&originalType=binary&ratio=1&size=92151&status=done&style=none&taskId=ud608bbbe-590b-4fb4-83a2-383318e20e4&width=348.64202880859375)<br />**MarkWord åŒºåŸŸæ˜ç»†**<br />å…·ä½“å­˜å‚¨çš„ä¸œè¥¿å¦‚ä¸‹ï¼Œé‡Œé¢é‚£äº›é”æ ‡è®°ï¼Œåé¢è·Ÿç€synchroizedé”å‡çº§çš„æ—¶å€™åœ¨ç»†è¯´ã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634131992477-67d6c369-1234-4c38-aba2-bf87f63cb6cf.png#clientId=u3f4b921e-4f2a-4&from=paste&height=420&id=u8ca71a34&margin=%5Bobject%20Object%5D&name=image.png&originHeight=578&originWidth=938&originalType=binary&ratio=1&size=338285&status=done&style=none&taskId=u01f78169-a690-46bd-a0bb-5439b26edf2&width=681.65625)

**SurvivoråŒºåŸŸ**<br />è¿™å—åŒºåŸŸä¸€èˆ¬æ˜¯ç»å†äº† YoungGCä¹‹åï¼Œå¯¹è±¡ä»EdenåŒºè¿›å…¥åˆ°SåŒºåŸŸ<br />æ³¨æ„ï¼šè¿™é‡Œæ˜¯ å¤åˆ¶ç®—æ³• æ¥åƒåœ¾å›æ”¶ã€‚æ¯æ¬¡å›æ”¶æ—¶ï¼Œæ°¸è¿œæœ‰ä¸€ä¸ªSåŒºä¸ºç©ºã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634132571667-358bd033-1fd0-403e-b8f2-9591c2f04f12.png#clientId=u3f4b921e-4f2a-4&from=paste&height=260&id=ue0390cba&margin=%5Bobject%20Object%5D&name=image.png&originHeight=279&originWidth=510&originalType=binary&ratio=1&size=238717&status=done&style=none&taskId=u096bfdb7-2dcb-4780-80fe-f4122d4aa65&width=475)


<a name="Wufgv"></a>
#### è€å¹´ä»£
è¿™é‡Œä¸»è¦æ˜¯å­˜å‚¨ä¸€äº›ç»å¸¸ç”¨çš„å¯¹è±¡ï¼Œæ¯”å¦‚Springä¸­çš„bean, ç¼“å­˜å¯¹è±¡ç­‰ éƒ½åœ¨è¿™ä¸ªåŒºåŸŸã€‚<br />ä¸»è¦æ˜¯ä»æ–°ç”Ÿä»£ä¸­æ™‹å‡è¿‡æ¥ï¼Œé‡Œé¢æ¶‰åŠä¸€äº›â€œå¹´é¾„åŠ¨æ€è§„åˆ’â€ï¼Œâ€œç©ºé—´åˆ†é…æ‹…ä¿æœºåˆ¶â€ï¼Œ"å¤§å¯¹è±¡ç›´æ¥ä»EdenåŒºæ™‹çº§"ï¼Œâ€œåƒåœ¾è¯†åˆ«ç®—æ³•â€ï¼Œâ€œåƒåœ¾æ¸…æ¥šç®—æ³•â€ï¼ŒSTWåœé¡¿ï¼ŒæŒ‡é’ˆå‹ç¼©ï¼Œåƒåœ¾å›æ”¶æ•´ç†ï¼ŒJVMååé‡ç­‰ç­‰ã€‚è¿™é‡Œä¸å¤šé€¼é€¼ï¼Œåé¢å•ç‹¬æ‹¿å‡ºä¸€ä¸ªç« èŠ‚è®²è®²GCè¿™ä¸€å¥—ä¸œè¥¿ã€‚<br />æœ¬å›¾ä¸»è¦æè¿°çš„å°±æ˜¯ï¼š<br />åˆ°è¾¾å¹´é¾„çš„æ™‹å‡ï¼Œå¤§å¯¹è±¡çš„ç›´æ¥æ™‹å‡ï¼Œå¹´é¾„åŠ¨æ€è§„åˆ’ï¼Œè¿™ä¸‰æ–¹é¢è¿›å…¥è€å¹´ä»£çš„æ–¹å¼ã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634132802632-91f150bf-6331-4ea7-9e33-8e9e46edd74f.png#clientId=u3f4b921e-4f2a-4&from=paste&height=421&id=u10f6378c&margin=%5Bobject%20Object%5D&name=image.png&originHeight=277&originWidth=208&originalType=binary&ratio=1&size=165130&status=done&style=none&taskId=uc24a2704-9b26-4b1f-853c-dbb240e02ad&width=316.3210144042969)<br />åˆ†é…æ‹…ä¿æœºåˆ¶ï¼šç®€å•æ¥è¯´å°±æ˜¯æ€•ä»æ–°ç”Ÿä»£è¿›å…¥è€å¹´ä»£çš„æ—¶å€™ï¼Œæ”¾ä¸ä¸‹ï¼Œè¦æ‹…ä¿åˆ¤æ–­ä¸€ä¸‹èƒ½æ”¾çš„ä¸‹ã€‚<br />åœ¨YGCä¹‹å‰ï¼Œè€å¹´ä»£è¦æ‹…ä¿ç°æœ‰å¯ç”¨è¿ç»­ç©ºé—´ï¼Œå¤§äº æ–°ç”Ÿä»£å¯¹è±¡å¤§å°æ€»æˆ– å†æ¬¡æ™‹å‡å¹³å‡çš„å¤§å°ï¼Œæ‰èƒ½YGCï¼Œå¦åˆ™å°±è¦å…ˆFullGCã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634437495902-e0c17d71-e940-4401-b4ec-81d98e5957e4.png#clientId=ub478cf2a-78e5-4&from=paste&height=120&id=ufb7638e9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=240&originWidth=2208&originalType=binary&ratio=1&size=536269&status=done&style=none&taskId=uacdcea58-0647-4737-8834-f18ac4b0234&width=1104)


<a name="TZqwk"></a>
# JVMè°ƒä¼˜
<a name="HKX37"></a>
## JVMå‚æ•°è°ƒä¼˜
æ²¡æœ‰ååˆ†å®Œç¾çš„JVMå‚æ•°æ¨¡æ¿ï¼Œä¸€èˆ¬éƒ½æ˜¯æ ¹æ®è‡ªå·±ç³»ç»Ÿçš„ä¸šåŠ¡åœºæ™¯å»åšè°ƒä¼˜ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†å…¬å¸éƒ½ä¼šå‡ºä¸€å¥—é»˜è®¤æ¨¡æ¿ï¼ŒæŒ‡å®šéƒ¨åˆ†å‚æ•°ï¼Œä¸€äº›ç‰¹æ®Šç³»ç»Ÿï¼Œå¦‚é«˜å¹¶å‘ï¼Œé«˜è¿ç®—ï¼Œå¤§å†…å­˜è¿ç®—ï¼Œå¤šåå°„ç­‰åœºæ™¯ä¸‹çš„éœ€è¦ç‰¹åˆ«è°ƒèŠ‚ã€‚
<a name="my0Di"></a>
### è°ƒä¼˜çš„æŒ‡æ ‡

   1. é™ä½STWå»¶è¿Ÿï¼šå°±æ˜¯å‡å°‘ç”¨æˆ·çº¿ç¨‹è¢«åœé¡¿çš„æ—¶é—´ã€‚
   1. æå‡æœ€å¤§ååé‡ï¼šå°±æ˜¯ä¸ºäº†ç³»ç»Ÿå¤šå¤„ç†ä¸€äº›ç”¨æˆ·çº¿ç¨‹çš„äº‹æƒ…ï¼Œå‡å°‘åƒåœ¾å›æ”¶ã€‚
   1. å‡å°‘å†…å­˜å ç”¨ï¼šå°±æ˜¯å°‘ç”¨å†…å­˜ï¼Œå‡å°‘æˆæœ¬ã€‚ è¾¾åˆ°ä¸ç»™ç‰›åƒè‰è¿˜å¹²æ´»è´¼çŒ›çš„çŠ¶æ€ã€‚

![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634214270533-c7b59afe-4502-488f-8260-4dcc72092dd9.png#clientId=u16b3059d-d69b-4&from=paste&height=128&id=u3971943f&margin=%5Bobject%20Object%5D&name=image.png&originHeight=156&originWidth=1085&originalType=binary&ratio=1&size=135739&status=done&style=none&taskId=u9e8214ff-1cf7-4c89-9aad-8ea0e5c4dcb&width=887.9971313476562)<br />ä¸‹å›¾ç½—åˆ—ä¸€å †å‚æ•°ï¼Œæ²¡æœ‰å“ªä¸ªé¢è¯•å®˜èƒ½å®Œå…¨èƒŒä¸‹æ¥ï¼Œä¸€å¥—JVMå‚æ•°ï¼Œæœ‰å‡ ç™¾ä¸ªï¼Œå’±ä»¬åªéœ€è®°ä½å¸¸ç”¨çš„å°±è¡Œã€‚
<a name="QYh3A"></a>
### å¸¸ç”¨å‚æ•°

1. å †æœ€å¤§ï¼Œæœ€å°ç©ºé—´ï¼Œè¿™é‡Œä¸€èˆ¬å‚æ•°ä¸­è®¾ç½®çš„ç›¸åŒ
1. æ ˆçš„å¤§å°ï¼Œ è¿™é‡Œä¸€èˆ¬é»˜è®¤2Mï¼Œå¦‚æœé«˜å¹¶éç³»ç»Ÿä¸‹ï¼Œ çº¿ç¨‹æ•°é‡åˆ›å»ºè¾ƒå¤šç³»ç»Ÿï¼Œå¯ä»¥è®¾ç½®å°‘ä¸€ç‚¹ã€‚
1. GCå›æ”¶ä¿¡æ¯ï¼ŒDumpæ—¥å¿—åœ°å€ï¼Œè¿™äº›æ—¥å¿—é…ç½®ï¼Œåœ¨OOMï¼ŒCPUé«˜è´Ÿè½½æ—¶ï¼Œå¯ä»¥ä½œä¸ºæ’æŸ¥ä¾æ®ã€‚
1. å †ä¸­çš„Edenï¼ŒSåŒºæ¯”ä¾‹ï¼Œyoung/OldåŒºåŸŸçš„æ¯”ä¾‹è°ƒèŠ‚ï¼Œä¸€èˆ¬ä¼šå¯¹ç³»ç»Ÿçš„ååæœ‰å½±å“ï¼Œè¿™è¦è®°ä½
1. å¤§å¯¹è±¡è¿›è€å¹´ä»£çš„é˜€å€¼å¤§å°ï¼Œè¿™ä¸ªä¸€èˆ¬åœ¨å¤šç¼“å­˜ç³»ç»Ÿä¸‹è¦ç‰¹åˆ«è®¾ç½®ã€‚
1. -XX:UserG1GCï¼ŒæŒ‡å®šä½¿ç”¨G1å›æ”¶å™¨ï¼Œè®°ä½G1å†…éƒ¨å›æ”¶çš„åŸç†ã€‚ä¸ºå•¥è¦è¿™ä¹ˆç”¨
1. å †ç©ºé—´å ç”¨åˆ°ç™¾åˆ†ä¹‹å¤šå°‘æ—¶ï¼Œè§¦å‘FullGCè¿™ä¸ªæ¯”ä¾‹ä¹Ÿæ˜¯éœ€è¦æåˆ°çš„ã€‚
1. è¿˜æœ‰FGCä¹‹åå‡ æ¬¡è¦åšç¢ç‰‡è°ƒæ•´ï¼Œè¿™ä¸ªä¹Ÿæ˜¯éœ€è¦è®¾ç½®çš„ã€‚

![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634214285643-0c3ad8f6-0596-4945-9181-ac71bde693b6.png#clientId=u16b3059d-d69b-4&from=paste&height=359&id=u4b18c615&margin=%5Bobject%20Object%5D&name=image.png&originHeight=486&originWidth=1186&originalType=binary&ratio=1&size=498413&status=done&style=none&taskId=u03699886-9dd9-4ce8-b03a-c36a225dfcf&width=875.3266906738281)

å¤šæé‚£ä¹ˆå‡ å˜´ï¼Œä¸€èˆ¬YGCçš„æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œå°±æ˜¯å°½é‡å»åšYGCï¼Œå‡å°‘OldGCï¼ŒğŸˆ¶ï¸çš„å…¬å¸ç”šè‡³å®ç°äº†0FullGCã€‚<br />å…³äºJVMä¼˜åŒ–å¯ä»¥å‚è€ƒå¦ä¸€ç¯‡ç¬”è®°â€œJVMâ€ï¼Œé‚£é‡Œé¢ä»‹ç»äº†å¤§é‡çš„GCå®æˆ˜æ¡ˆä¾‹ã€‚
<a name="ESgsl"></a>
## GCå›æ”¶å™¨
<a name="eixlz"></a>
### å¼€èƒƒå°èœ
åœ¨å¼€å§‹èŠGCç®—æ³•ä¹‹å‰ï¼Œå…ˆäº†è§£å›¾ä¸­å‡ ä¸ªæ¦‚å¿µã€‚
<a name="JV59B"></a>
#### STW
ï¼ˆç”¨æˆ·çº¿ç¨‹åœé¡¿ï¼‰<br />GCè¿‡ç¨‹ä¸­ï¼Œåšåƒåœ¾å¯¹è±¡çš„æ£€æµ‹ï¼Œéœ€è¦æš‚åœç”¨æˆ·çº¿ç¨‹ï¼Œå¯¼è‡´JVMå‡æ­»çŠ¶æ€ï¼Œå½±å“ç³»ç»Ÿæ­£å¸¸å·¥ä½œã€‚<br />ä¸ºå•¥è¦æš‚åœï¼Ÿ <br />å°±æ˜¯é¿å…ï¼šä¸€è¾¹æ£€æµ‹ï¼Œä¸€è¾¹ç”Ÿäº§åƒåœ¾ï¼Œä¸èƒ½å‡†ç¡®åˆ¤æ–­åƒåœ¾å¯¹è±¡å•¦å‘€ã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634215377252-e94e8f2b-f40e-483e-975e-47df28e8daf5.png#clientId=u16b3059d-d69b-4&from=paste&height=145&id=JE1OE&margin=%5Bobject%20Object%5D&name=image.png&originHeight=147&originWidth=668&originalType=binary&ratio=1&size=246888&status=done&style=none&taskId=ud588d375-e5db-4fe7-a008-3a0506eae7a&width=657.6562347412109)<br />è¿™é‡Œè¡ç”Ÿå‡ºä¸€ä¸ªé—®é¢˜ï¼š<br />**ç”¨æˆ·çº¿ç¨‹æ˜¯å¦‚ä½•åœæ­¢çš„ï¼Ÿ  ** ç®€å•çš„Stop å°±ä¸æ€•é‡è¢«æ­»é”ï¼ŒCPUå ç”¨ï¼Œå¯¹è±¡æ··ä¹±çš„æƒ…å†µå˜›ï¼Ÿ

- ç®€å•è®°ä½ä¸¤ä¸ªå…³é”®è¯ï¼šå®‰å…¨ç‚¹   ï¼Œ  å®‰å…¨åŒºåŸŸ   åªæœ‰çº¿ç¨‹è¿è¡Œåœ¨è¿™ä¸¤ä¸ªä½ç½®æ—¶ï¼Œæ‰èƒ½å¤Ÿåœæ­¢ã€‚
- å°±åƒé«˜é€Ÿä¸Šçš„æ±½è½¦ï¼Œä½ ä¸èƒ½éšä¾¿åœè½¦ï¼Œåªèƒ½å»åº”æ€¥è½¦é“ï¼Œæˆ–è€…å» ä¼‘æ¯ç«™ å»åœè½¦ã€‚ä¸ç„¶ä¼šå‘ç”Ÿæ„å¤–ï¼

è¿™é‡Œåˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œåƒåœ¾å›æ”¶çš„æ—¶å€™æš‚åœç”¨æˆ·çº¿ç¨‹ï¼Œå’ŒCPUæ—¶é—´ç‰‡åˆ‡æ¢æ—¶æš‚åœçº¿ç¨‹ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ


<a name="bYpUQ"></a>
#### å®‰å…¨ç‚¹/åŒºåŸŸ
Soft Point 	/   Soft Region<br /> ä¸»è¦ä½œç”¨å°±æ˜¯ï¼šè®©å †å¯¹è±¡çŠ¶æ€ç¡®å®šä¸€è‡´ã€‚<br /> <br />**å®‰å…¨ç‚¹/åŒºèƒ½è§£å†³çš„é—®é¢˜**ï¼šï¼ˆä¸ºå•¥è¦æœ‰å®‰å…¨èŠ‚ç‚¹ï¼Ÿï¼‰<br /> GCï¼Œåå‘é”æ’¤é”€ï¼Œç­‰ç­‰ï¼Œå¥½åƒåé¢çš„å¯è¾¾æ€§åˆ†æçš„æ—¶å€™ï¼Œä¹Ÿç”¨åˆ°äº† å®‰å…¨ç‚¹ï¼Œå®‰å…¨åŒºåŸŸã€‚

**å®‰å…¨ç‚¹ æœ‰å“ªäº›ï¼šï¼ˆç®€å•æ¥è¯´å°±æ˜¯åœ¨ â€œå †å¯¹è±¡çŠ¶æ€ç¡®å®šä¸€è‡´â€ çš„æ—¶å€™ï¼Œä¸‹é¢è¿™äº›ç›¸ä¿¡æˆ‘ï¼Œè®°ä¸ä½çš„ï¼‰**

   - å¾ªç¯ç»“æŸçš„æœ«å°¾æ®µ
   - æ–¹æ³•è°ƒç”¨ä¹‹å
   - æŠ›å‡ºå¼‚å¸¸çš„ä½ç½®
   - æ–¹æ³•è¿”å›ä¹‹å‰

**å¦‚ä½•è¿›å…¥å®‰å…¨èŠ‚ç‚¹ï¼Ÿ **<br />ä¸»åŠ¨å¼ä¸­æ–­ï¼šå°±æ˜¯è‡ªå·±ä¸»åŠ¨åœ¨ åº”æ€¥è½¦é“ç‚¹ åœè½¦ã€‚<br />æŠ¢æ–­å¼ä¸­æ–­ï¼šå°±æ˜¯ç›´æ¥åœ¨é«˜é€Ÿä¸Šåœè½¦ï¼Œç„¶åè¢« æ‹ç…§ å åœ¨è®©ä½ åœåˆ° åº”æ€¥è½¦é“ç‚¹

å®‰å…¨åŒºåŸŸ ï¼š

- ä¼‘çœ æˆ–è€…é˜»å¡çš„çº¿ç¨‹ï¼Œå¯¹å †ä¸­çš„å¯¹è±¡æ²¡æœ‰æ“ä½œä¿®æ”¹ï¼Œå°±å¯ä»¥è§†ä¸ºåœ¨å®‰å…¨åŒºåŸŸäº†ã€‚
- ç”¨æˆ·çº¿sleepçŠ¶æ€æˆ–è€…BlockedçŠ¶æ€ï¼Œæ— æ³•å“åº”è™šæ‹Ÿæœºä¸­æ–­è¯·æ±‚ï¼æ— æ³•è®©ä»–æŒªåˆ°å®‰å…¨ç‚¹äº†ï¼Œæ‰€ä»¥å°±æŠŠä»–ä»¬ä¹Ÿç§°ä¸ºå®‰å…¨åŒºåŸŸäº†ã€‚
> - è¯´ç™½äº†ï¼Œå°±æ˜¯ä¸ºäº†ä¸€äº› ç‰¹æ®Šçº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹å·²ç»å¤„äºéè¿è¡ŒçŠ¶æ€ï¼Œç»™ä»–ä»¬æˆ´äº†ä¸ªå®‰å…¨çš„å¤´è¡”è€Œå·²ã€‚


![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634219166880-1075c070-cfe4-41e5-b590-d94073f81457.png#clientId=u16b3059d-d69b-4&from=paste&height=228&id=hG6MP&margin=%5Bobject%20Object%5D&name=image.png&originHeight=265&originWidth=1046&originalType=binary&ratio=1&size=310738&status=done&style=none&taskId=u07f15bd4-9cb1-4ccf-a097-0138eee2ef5&width=898.9971313476562)<br />è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µå«OOMapï¼Œè¿™ä¸ªå›¾é‡Œæ²¡æœ‰æèµ·ï¼Œä½†æ˜¯ä¹Ÿæ˜¯å’Œå®‰å…¨èŠ‚ç‚¹ï¼Œç›¸å…³çš„ä¸œè¥¿ï¼Œä¸‹å»è‡ªå·±æŸ¥æŸ¥ã€‚

<a name="qyxaK"></a>
#### å¯è¾¾æ€§åˆ†æç®—æ³•
åˆ¤æ–­ä¸ºåƒåœ¾å¯¹è±¡çš„ä¸€ç§ç®—æ³•ã€‚è¿™ä¹Ÿæ˜¯ç›®å‰è™šæ‹Ÿæœºä¸­ç”¨çš„æœ€å¤šçš„ç®—æ³•ã€‚

**å•¥å«å¯è¾¾æ€§åˆ†æç®—æ³•ï¼Ÿ**

- æ¥æºäºç¦»æ•£æ•°å­¦ä¸­çš„åŸç†ï¼Œä»GCRootèŠ‚ç‚¹å¼€å§‹åˆ†æï¼Œåˆ¤æ–­å“ªäº›å¯¹è±¡è¢«å¼•ç”¨ï¼Œå°±ä¸ºæ­£å¸¸å¯¹è±¡ï¼Œå¦åˆ™ä¸ºåƒåœ¾ã€‚

- [x] å“ªäº›å¯ä»¥è§†ä¸ºGCRootèŠ‚ç‚¹ï¼Ÿ

*è™šæ‹Ÿæœºæ ˆä¸­å¼•ç”¨çš„å¯¹è±¡ï¼ˆæœ¬åœ°å˜é‡è¡¨ï¼‰<br />* æœ¬åœ°æ–¹æ³•æ ˆä¸­å¼•ç”¨çš„å¯¹è±¡<br />* æ–¹æ³•åŒºä¸­é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡<br />* æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡

<a name="h0x1q"></a>
#### å¯¹è±¡å¼•ç”¨ä¿¡æ¯å­˜å‚¨ï¼šè®°å¿†é›†ï¼Œå¡è¡¨ï¼Œå†™å †å±éšœ
ä¸Šé¢çŸ¥é“å¯è¾¾æ€§åˆ†æç®—æ³•éœ€è¦å¿«é€Ÿæ‰¾å‡ºåƒåœ¾å¯¹è±¡ï¼Œé‚£ä¹ˆè¿™é‡Œå°±å‡ºç°å‡ ä¸ªé—®é¢˜ï¼Ÿ

- è¿™ä¹ˆå¤šå¯¹è±¡ï¼Œå¦‚ä½•å¿«é€ŸæŸ¥æ‰¾ï¼Ÿ
- è€å¹´ä»£å¯¹è±¡å¼•ç”¨ æ–°ç”Ÿä»£å¯¹è±¡ï¼Œå¦‚ä½•å®ç°è·¨ä»£å¼•ç”¨ï¼Ÿ
- åˆ¤æ–­åƒåœ¾å¯¹è±¡çš„æ—¶å€™ï¼Œè€å¹´ä»£å¯¹è±¡æ˜¯ä¸æ˜¯ä¹Ÿå¾—å»å…¨éƒ¨éå†ä¸€éï¼Ÿ

ä¸‹é¢ä¸»è¦è®°ä½å‡ ä¸ªå…³é”®å­—ï¼š<br />**è®°å¿†é›†æ€æƒ³ï¼Œå¡è¡¨æ•°ç»„å­˜å‚¨ï¼ŒG1è®°å¿†é›†å“ˆå¸Œæ€æƒ³ï¼Œå¼•ç”¨çŠ¶æ€æ›´æ”¹åˆ‡é¢å®ç°ï¼ˆ**å†™å †å±éšœ**ï¼‰ã€‚**<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634558197192-d353ed63-412a-46d1-88d3-0da492ec6302.png#clientId=u929b6850-4fa1-4&from=paste&height=357&id=ua7c7ac5e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=573&originWidth=1410&originalType=binary&ratio=1&size=1641955&status=done&style=none&taskId=u2776d129-847b-4000-bbd3-333a16c5f01&width=877.9999694824219)ç®€å•æ¥è¯´ï¼š<br />æ–°ç”Ÿä»£é€šè¿‡å¯è¾¾æ€§åˆ†æç®—æ³•åˆ¤æ–­å¯¹è±¡çš„æ—¶å€™ï¼Œä¼šæŠŠè€å¹´ä»£ä¹Ÿç®—ä¸Šæ‰«æèŒƒå›´ï¼Œä½†æ˜¯è¿™æ ·æ•ˆç‡å¾ˆä½ï¼Œæ‰€ä»¥ä¸ºäº†<br />**è§£å†³è·¨ä»£é—®é¢˜ï¼Œ**åœ¨æ–°ç”Ÿä»£å¼•å…¥äº†è®°å½•é›†ï¼Œå¡è¡¨çš„æ¦‚å¿µï¼Œå»å®ç°å¿«é€Ÿæ‰«æåƒåœ¾å¯¹è±¡**ã€‚**

**è®°å¿†é›†**<br />**ä¸€ç§æŠ½è±¡æ•°æ®ç»“æ„ï¼Œä¸ºäº†è®°å½• è€å¹´ä»£å¯¹æ–°ç”Ÿä»£çš„å¼•ç”¨ã€‚è§£å†³è·¨ä»£å¼•ç”¨ çš„ä¸€ç§æ€æƒ³ã€‚**<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634559050455-369e19c4-ad6b-4695-a9cd-17468901939c.png#clientId=u929b6850-4fa1-4&from=paste&height=213&id=u9c353e0b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=286&originWidth=986&originalType=binary&ratio=1&size=136316&status=done&style=none&taskId=u4b56fdf0-0e6f-4de7-94f6-2a009dcc591&width=734.6647644042969)<br />å¡è¡¨<br />è®°å¿†é›†åˆçš„ä¸€ç§å…·ä½“å®ç°ï¼Œä¸»è¦ç”¨åœ¨CMSå›æ”¶å™¨ä¸Šé¢ã€‚åº•å±‚æ˜¯å­—èŠ‚æ•°ç»„ï¼ˆåº•å±‚æ•°æ®ç»“æ„æ˜¯Bit Mapï¼‰ï¼Œæ•°ç»„å…ƒç´ è®°å½•çš„æ˜¯ è€å¹´ä»£ä¸­çš„ å¼•ç”¨çŠ¶æ€ï¼Œçœ‹æ˜¯å¦å­˜åœ¨è·¨ä»£å¼•ç”¨ã€‚<br />å¦‚æœå¼•ç”¨å°±ç›¸å½“äº  arr[9] = 1 .å½“å…ƒç´ æ ‡è®°ä¸º1æ—¶ï¼Œå°±ä»£è¡¨è¿™å—åŒºåŸŸæœ‰å¯¹è±¡è¢«è·¨ä»£å¼•ç”¨äº†ã€‚ <br />**ä¸»è¦è®°å½•çš„æ˜¯ï¼š**æˆ‘å¼•ç”¨äº†è°çš„å¯¹è±¡![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634559090957-43feaa3c-6f74-4b91-9f4e-6fe0e7cffa96.png#clientId=u929b6850-4fa1-4&from=paste&height=182&id=u96979133&margin=%5Bobject%20Object%5D&name=image.png&originHeight=248&originWidth=985&originalType=binary&ratio=1&size=107697&status=done&style=none&taskId=u1ccefe58-d16b-4334-bc06-6a7eacff8fe&width=723.3238525390625)
> - åœ¨è¿›è¡ŒYoungGCæ—¶ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œå¯¹ä¸€ä¸ªå¯¹è±¡æ˜¯å¦è¢«å¼•ç”¨çš„è¿‡ç¨‹ï¼Œéœ€è¦æ‰«ææ•´ä¸ªOldåŒºï¼Œæ‰€ä»¥JVMè®¾è®¡äº†CardTableï¼Œå°†OldåŒºåˆ†ä¸ºä¸€ä¸ªä¸€ä¸ªCardï¼Œä¸€ä¸ªCardæœ‰å¤šä¸ªå¯¹è±¡ï¼›å¦‚æœä¸€ä¸ªCardä¸­çš„å¯¹è±¡æœ‰å¼•ç”¨æŒ‡å‘YoungåŒºï¼Œåˆ™å°†å…¶æ ‡è®°ä¸ºDirty Cardï¼Œä¸‹æ¬¡éœ€è¦è¿›è¡ŒYoungGCæ—¶ï¼Œåªéœ€è¦å»æ‰«æDirty Cardå³å¯ã€‚
> - Card Table åœ¨åº•å±‚æ•°æ®ç»“æ„ä»¥ Bit Mapå®ç°ã€‚


![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634561213221-41dd13dc-f55a-429d-9318-2b7177ddd1b3.png#clientId=u7f3ba72e-59ba-4&from=paste&height=549&id=u923f20cb&margin=%5Bobject%20Object%5D&name=image.png&originHeight=755&originWidth=993&originalType=binary&ratio=1&size=347455&status=done&style=none&taskId=u7f0f5ae2-3b06-4467-8bb5-81d457ff5b2&width=721.9942932128906)

**å†™å±éšœ**<br />ä¸Šé¢å¼•ç”¨å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒGCå›æ”¶å™¨ä¸­æœ‰ å†™å±éšœè¿™ä¸ªåŠŸèƒ½ï¼Œç›¸å½“äºOOPåˆ‡é¢æ€æƒ³ï¼Œåœ¨å¯¹è±¡èµ‹å€¼çš„æ—¶å€™ï¼Œå®Œæˆå¡è¡¨çŠ¶æ€çš„æ›´æ–°ã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634559030178-02318122-eff4-4e57-87ec-79b3f36241d2.png#clientId=u929b6850-4fa1-4&from=paste&height=221&id=u37958ae5&margin=%5Bobject%20Object%5D&name=image.png&originHeight=343&originWidth=981&originalType=binary&ratio=1&size=115342&status=done&style=none&taskId=ue472cc46-51a3-486a-9d5e-a2e6fb0be11&width=631.9886169433594)

**G1çš„è®°å¿†é›†**<br />ä¸Šé¢è¯´åˆ°å¡è¡¨æœºåˆ¶ä¸»è¦åº”ç”¨è¿™CMSåƒåœ¾å›æ”¶å™¨ä¸­ï¼Œé‚£ä¹ˆG1åƒåœ¾å›æ”¶å™¨ï¼Œæ˜¯æ€ä¹ˆç©çš„å‘¢ï¼Ÿ<br />å› ä¸ºG1åƒåœ¾å›æ”¶å™¨æ˜¯åŸºäºåˆ†åŒºæ¨¡å‹çš„ï¼Œæ‰€ä»¥åªéœ€è¦çŸ¥é“æ¯ä¸ªRegionçš„å¼•ç”¨æŒ‡å‘äº†ä»–ï¼Œå¹¶ä¸”è¿™äº›Regionæ˜¯ä¸æ˜¯å›æ”¶çš„ä¸€éƒ¨åˆ†ã€‚ä½†æ˜¯å¡è¡¨è¿™ç§è®°å½•ç»“æ„åªçŸ¥é“æœ‰æ²¡æœ‰å¼•ç”¨ï¼Œä¸çŸ¥é“å…·ä½“å¼•ç”¨æ˜¯è°ï¼Œæ‰€ä»¥éœ€è¦å¦ä¸€ç§ç»“æ„ï¼ˆRSetï¼‰ã€‚
> æ‰€ä»¥åœ¨**G1åƒåœ¾å›æ”¶å™¨çš„è®°å¿†é›†çš„å®ç°å®é™…ä¸Šæ˜¯åŸºäºå“ˆå¸Œè¡¨çš„ï¼Œkeyä»£è¡¨çš„æ˜¯å…¶ä»–regionçš„èµ·å§‹åœ°å€ï¼Œvalueæ˜¯ä¸€é›†åˆï¼Œé‡Œé¢å­˜æ”¾äº†å¯¹åº”åŒºåŸŸçš„å¡è¡¨çš„ç´¢å¼•ï¼Œå› æ­¤G1çš„regionèƒ½å¤Ÿé€šè¿‡è®°å¿†é›†çŸ¥é“ï¼Œå½“å‰æ˜¯å“ªä¸ªregionæœ‰å¼•ç”¨æŒ‡å‘äº†å®ƒï¼Œå¹¶ä¸”èƒ½çŸ¥é“æ˜¯å“ªå—åŒºåŸŸå­˜åœ¨æŒ‡é’ˆæŒ‡å‘ã€‚**

å› ä¸º**æ¯ä¸ªregionéƒ½ç»´æŠ¤ä¸€ä¸ªè®°å¿†é›†ï¼Œå†…å­˜å ç”¨é‡è‚¯å®šå¾ˆå¤§ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆG1åƒåœ¾å›æ”¶å™¨æ¯”ä¼ ç»Ÿçš„å…¶ä»–åƒåœ¾å›æ”¶å™¨è¦æœ‰æ›´é«˜çš„å†…å­˜å ç”¨ã€‚æ®ç»Ÿè®¡G1è‡³å°‘è¦è€—è´¹å¤§çº¦10%-20%çš„Javaå †ç©ºé—´æ¥ç»´æŠ¤æ”¶é›†å™¨çš„å·¥ä½œã€‚**<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634559549894-4c1d2158-e9e3-411b-a724-05a548a01452.png#clientId=u929b6850-4fa1-4&from=paste&height=223&id=u1b9bd4b4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=275&originWidth=973&originalType=binary&ratio=1&size=164714&status=done&style=none&taskId=u42af8eca-fded-463f-93e1-d4ada526996&width=787.3323669433594)<br />**RSet**<br />å¯ä»¥ç†è§£ä¸ºæ˜¯å¡è¡¨çš„ä¸€ç§å‡çº§ï¼Œåº•å±‚æ˜¯å“ˆå¸Œè¡¨å®ç°ã€‚ç”¨æ¥è§£å†³G1ä¸­è·¨ä»£å¼•ç”¨çš„é—®é¢˜ã€‚<br />**ä¸»è¦è®°å½•çš„æ˜¯ï¼š**è°å¼•ç”¨äº†æˆ‘çš„å¯¹è±¡
> G1çš„RSetæ˜¯åœ¨Card Tableçš„åŸºç¡€ä¸Šå®ç°çš„ï¼šæ¯ä¸ªRegionä¼šè®°å½•ä¸‹åˆ«çš„Regionæœ‰æŒ‡å‘è‡ªå·±çš„æŒ‡é’ˆï¼Œå¹¶æ ‡è®°è¿™äº›æŒ‡é’ˆåˆ†åˆ«åœ¨å“ªäº›Cardçš„èŒƒå›´å†…ã€‚è¿™ä¸ªRSetå…¶å®æ˜¯ä¸€ä¸ª**Hash Table**ï¼ŒKeyæ˜¯åˆ«çš„Regionçš„èµ·å§‹åœ°å€ï¼ŒValueæ˜¯ä¸€ä¸ªé›†åˆï¼Œé‡Œé¢çš„å…ƒç´ æ˜¯Card Tableçš„Indexã€‚æ¯ä¸ªRegionä¸­éƒ½æœ‰ä¸€ä¸ªRSetï¼Œè®°å½•å…¶ä»–Regionåˆ°æœ¬Regionçš„å¼•ç”¨ä¿¡æ¯ï¼›ä½¿å¾—åƒåœ¾å›æ”¶å™¨ä¸éœ€è¦æ‰«ææ•´ä¸ªå †æ‰¾åˆ°è°å¼•ç”¨å½“å‰åˆ†åŒºä¸­çš„å¯¹è±¡ï¼Œåªéœ€è¦æ‰«æRSetå³å¯ã€‚

![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634564148959-ee48bd9d-08d6-4811-9b56-4cc84bb149d9.png#clientId=udb394039-4352-4&from=paste&height=443&id=u65f3a9bc&margin=%5Bobject%20Object%5D&name=image.png&originHeight=526&originWidth=995&originalType=binary&ratio=1&size=224196&status=done&style=none&taskId=ue4b30682-b145-4c8f-a12a-01485ddd3a2&width=837.6619262695312)
<a name="oFD3g"></a>
#### 
<a name="ZRqai"></a>
#### ä¸‰è‰²æŒ‡é’ˆï¼šï¼ˆä¸‰è‰²æ ‡è®°ï¼‰ï¼š
å¯ä»¥ç†è§£ä¸º å¯è¾¾æ€§åˆ†æç®—æ³• ä¸­çš„ä¸€ç§å…·ä½“å®ç°ç»†èŠ‚ï¼Œç”¨æ¥åˆ¤æ–­æ˜¯å¦ä¸ºåƒåœ¾å¯¹è±¡çš„æ–¹æ³•ã€‚
> ä¸‰è‰²æ ‡è®°æ³•æ˜¯ä¸€ç§åƒåœ¾å›æ”¶æ³•ï¼Œå®ƒå¯ä»¥è®©JVMä¸å‘ç”Ÿæˆ–ä»…çŸ­æ—¶é—´å‘ç”ŸSTWï¼Œä»è€Œè¾¾åˆ°æ¸…é™¤JVMå†…å­˜åƒåœ¾çš„ç›®çš„ã€‚JVMä¸­çš„**CMSã€G1åƒåœ¾å›æ”¶å™¨**æ‰€ä½¿ç”¨åƒåœ¾å›æ”¶ç®—æ³•å³ä¸ºä¸‰è‰²æ ‡è®°æ³•ã€‚

ä¸‰è‰²æ ‡è®°æ³•å°†å¯¹è±¡çš„é¢œè‰²åˆ†ä¸ºäº†é»‘ã€ç°ã€ç™½ï¼Œä¸‰ç§é¢œè‰²ã€‚<br />**ç™½è‰²**ï¼šè¯¥å¯¹è±¡æ²¡æœ‰è¢«æ ‡è®°è¿‡ã€‚ï¼ˆå¯¹è±¡åƒåœ¾ï¼‰<br />**ç°è‰²**ï¼šè¯¥å¯¹è±¡å·²ç»è¢«æ ‡è®°è¿‡äº†ï¼Œä½†è¯¥å¯¹è±¡ä¸‹çš„å±æ€§æ²¡æœ‰å…¨è¢«æ ‡è®°å®Œã€‚ï¼ˆGCéœ€è¦ä»æ­¤å¯¹è±¡ä¸­å»å¯»æ‰¾åƒåœ¾ï¼‰<br />**é»‘è‰²**ï¼šè¯¥å¯¹è±¡å·²ç»è¢«æ ‡è®°è¿‡äº†ï¼Œä¸”è¯¥å¯¹è±¡ä¸‹çš„å±æ€§ä¹Ÿå…¨éƒ¨éƒ½è¢«æ ‡è®°è¿‡äº†ã€‚ï¼ˆç¨‹åºæ‰€éœ€è¦çš„å¯¹è±¡ï¼‰

ç®—æ³•è¯¦ç»†è¿‡ç¨‹å°±ä¸å¤šBBäº†ã€‚å›å¤´å¤ä¹ åšå®¢å§ã€‚

- å‚è€ƒåšå®¢ï¼š[https://blog.csdn.net/u013256816/article/details/120695212](https://blog.csdn.net/u013256816/article/details/120695212)

ä¸‰è‰²æ ‡è®°ç®—æ³•å­˜åœ¨çš„é—®é¢˜ï¼š<br />**1.æµ®åŠ¨åƒåœ¾**<br />å·²ç»è¢«æ ‡è®°æˆé»‘è‰²æˆ–è€…ç°è‰²çš„å¯¹è±¡ï¼Œçªç„¶å˜æˆäº†åƒåœ¾ï¼Œç„¶åæ— æ³•æ‰«æåˆ°ã€‚<br />è§£å†³æ–¹æ¡ˆï¼šåªèƒ½ä¸‹æ¬¡å»æ¸…ç†ã€‚<br />**2.å¯¹è±¡æ¼æ ‡è®°**<br />å¹¶å‘è¿‡ç¨‹ä¸­ï¼Œå¯¼è‡´è¯¥å¯¹è±¡è¢«ç¨‹åºæ‰€éœ€è¦ï¼Œå´åˆè¦è¢«GCå›æ”¶ï¼Œè¢«æ ‡è®°æˆäº†ç™½è‰²å¯¹è±¡ã€‚<br />è§£å†³æ–¹æ¡ˆï¼š<br />CMSå¯¹ å¢åŠ å¼•ç”¨ç¯èŠ‚ çš„å¤„ç†ã€‚<br />G1åˆ™å¯¹åˆ é™¤å¼•ç”¨ç¯èŠ‚ åšäº†å¤„ç†ã€‚ï¼ˆSATBçš„å®ç°ï¼‰

<a name="BzAFY"></a>
#### å…¶ä»–æ¦‚å¿µï¼š
SATBï¼š<br />SATBæ˜¯ç»´æŒå¹¶å‘GCçš„ä¸€ç§æ‰‹æ®µï¼ŒG1ä¹‹æ‰€ä»¥èƒ½å®ç°å¹¶å‘å°±æ˜¯åŸºäºSTABå®ç°çš„ã€‚å¯ä»¥ç†è§£æˆå¼€å§‹å‰å¯¹å¯¹è±¡åšä¸€æ¬¡å¿«ç…§ï¼Œè®¤ä¸ºå½“æ—¶æ˜¯æ´»å¯¹è±¡å°±æ˜¯æ´»çš„ï¼Œå½¢æˆä¸€ä¸ªå¯¹è±¡å›¾ã€‚<br />å¢é‡æ›´æ–°ï¼š

æœ‰è‰²æŒ‡é’ˆï¼š<br />å¤šæ ‡-æ¼æ ‡ï¼š

æ–°ç”Ÿä»£GCå™¨è§£å†³æ¼æ ‡<br />CMSï¼š<br />å†™å±éšœ+å¢é‡æ›´æ–°<br />G1:<br />SATB + å†™å±éšœ<br />ZGCï¼šè¯»å±éšœ<br />ZGCå®ç°ï¼šæœ‰è‰²æŒ‡é’ˆ + å†…å­˜å±éšœ


<a name="Qq2Pt"></a>
### å›æ”¶ç®—æ³•
<a name="itJbp"></a>
#### å¤åˆ¶ç®—æ³•
å°±æ˜¯æŠŠæ­£å¸¸å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ç©ºåŒºåŸŸï¼Œç„¶åå‰©ä¸‹çš„åƒåœ¾å¯¹è±¡æ¸…é™¤æ‰ã€‚<br />è¿™é‡Œä¸€èˆ¬æ˜¯å¹´è½»ä»£å›æ”¶æ—¶ä½¿ç”¨ï¼Œè¿™å°±æ˜¯S1ï¼ŒS2åŒºåŸŸå€’æ¥å€’å»çš„åŸå› ã€‚<br />**ç¼ºç‚¹ï¼š**

- ä¸é€‚ç”¨äºå­˜æ´»å¯¹è±¡å¤šçš„åœºæ™¯ï¼Œå€’è…¾å¼€é”€å¤§ã€‚
- å†…å­˜åˆ©ç”¨ç‡ä½ã€‚

**ä¼˜ç‚¹**ï¼š

- æ¸…ç†åå†…å­˜ä¾æ—§æ•´é½ã€‚ã€‚

![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634214650241-f2187318-bb0a-4538-9e71-ae8d1c27d140.png#clientId=u16b3059d-d69b-4&from=paste&height=261&id=u52e10a78&margin=%5Bobject%20Object%5D&name=image.png&originHeight=245&originWidth=447&originalType=binary&ratio=1&size=235828&status=done&style=none&taskId=u35adc893-1b44-402c-83cc-006e3ed3948&width=476.99147033691406)
<a name="UkNjz"></a>
#### æ ‡è®°-æ¸…é™¤ç®—æ³•
è¯´ç™½äº†å°±æ˜¯é€šè¿‡å¯è¾¾æ€§ç®—æ³•åˆ¤æ–­ï¼Œæ ‡è®°å¤„åƒåœ¾å¯¹è±¡ï¼Œç„¶åæ¸…é™¤æ‰ã€‚<br />ç›®å‰æš‚æ—¶æ²¡å•¥äººç”¨ï¼Œä¸€èˆ¬è¢«åé¢çš„æ ‡è®°æ•´ç†ç®—æ³•ç»™æ›¿ä»£äº†ã€‚ç”¨äºè€å¹´ä»£<br />**ç¼ºç‚¹ï¼š**

- ä¸¤ä¸ªé˜¶æ®µæ•ˆç‡ä¸é«˜ã€‚åœé¡¿æ—¶é—´é•¿
- å†…å­˜ç¢ç‰‡ã€‚

**ä¼˜ç‚¹ï¼š**

- ç®€å•ç²—æš´

![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634214880943-8f3a2095-01ba-4ceb-9133-1b5faff00df1.png#clientId=u16b3059d-d69b-4&from=paste&height=122&id=u1ee37bdd&margin=%5Bobject%20Object%5D&name=image.png&originHeight=121&originWidth=456&originalType=binary&ratio=1&size=106867&status=done&style=none&taskId=uf28b0f72-2ef2-4c37-bfa3-f9db8c31acf&width=459.98863220214844)
<a name="ODg8m"></a>
#### æ ‡è®°-æ•´ç†ç®—æ³•
å°±æ˜¯ä¸Šé¢æ ‡è®°æ¸…é™¤ç®—æ³•çš„ä¸€ä¸ªå‡çº§ç‰ˆï¼Œæœ€åå¤šä¸€ä¸ªæ•´ç†è¿‡ç¨‹ã€‚<br />ä¸€èˆ¬åœ¨JVMå‚æ•°é‡Œå¯ä»¥è®¾ç½®ï¼Œå½“FGCä¹‹åå‡ æ¬¡å°±æ•´ç†ä¸€æ¬¡ç¢ç‰‡ï¼Œè¿™ä¸ªå‚æ•°æ˜¯å¯ä»¥è°ƒèŠ‚çš„ï¼Œä¸€èˆ¬ç”Ÿäº§ç¯å¢ƒä¸Šä¼šè®¾ç½®æ¯æ¬¡FGCåæ‰§è¡Œæ•´ç†ã€‚<br />å› ä¸ºå½“å†…å­˜ç¢ç‰‡è¿‡å¤šçš„æ—¶å€™ä¼šæš´éœ²å‡ºä¸€ä¸ªé—®é¢˜ï¼šå½“åˆ°ä¸€å®šæ•°é‡æ—¶ï¼ŒCMSæ— æ³•æ¸…ç†è¿™äº›ç¢ç‰‡äº†ï¼ŒCMSä¼šè®©Serial Oldåƒåœ¾å¤„ç†å™¨æ¥æ¸…ç†è¿™äº›åƒåœ¾ç¢ç‰‡ï¼Œè€ŒSerial Oldåƒåœ¾å¤„ç†å™¨æ˜¯å•çº¿ç¨‹æ“ä½œè¿›è¡Œæ¸…ç†åƒåœ¾çš„ï¼Œæ•ˆç‡å¾ˆä½ã€‚æ‰€ä»¥è¦è®¾ç½®åƒåœ¾å›æ”¶æ—¶éœ€è¦åŠæ—¶æ•´ç†ç¢ç‰‡ã€‚

**ç¼ºç‚¹ï¼š**

- éœ€è¦ç§»åŠ¨å¯¹è±¡ï¼ŒSTWåœé¡¿æ—¶é—´é•¿

**æœ‰ç‚¹ï¼š**

- å†…å­˜å®Œæ•´

![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634215050902-fcd7553e-ca9b-4d4f-b11d-d05b1f2ac709.png#clientId=u16b3059d-d69b-4&from=paste&height=167&id=u797ec2d4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=160&originWidth=545&originalType=binary&ratio=1&size=127313&status=done&style=none&taskId=u457d03fa-b528-486c-bb61-47cc4a18df9&width=568.6590881347656)


<a name="RIzsr"></a>
# å…¶ä»–
<a name="ziJwW"></a>
## å¯¹è±¡é€ƒé€¸å’Œåˆ†é…
çŸ¥é“ä»€ä¹ˆæ˜¯å¯¹è±¡é€ƒé€¸ï¼Œå¯¹è±¡æ˜¯æ€ä¹ˆåˆ†é…çš„ã€‚

**å¯¹è±¡åˆ†é…æµç¨‹å›¾**<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634643940145-8154dd8e-e4e2-41f6-a3cf-5329af31693c.png#clientId=u72e36da2-7449-4&from=paste&height=289&id=ued58e87b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=866&originWidth=2130&originalType=binary&ratio=1&size=368792&status=done&style=none&taskId=u6c078c03-8642-44b9-933e-00724a339a5&width=710)
<a name="NjmiE"></a>
#### ä»€ä¹ˆæ˜¯å¯¹è±¡é€ƒé€¸
è¯´ç™½äº†å°±æ˜¯å¯¹è±¡ç›´æ¥åˆ›å»ºåœ¨æ ˆå¸§é‡Œé¢äº†ï¼Œæ²¡æœ‰å­˜å‚¨åœ¨å †EdenåŒºå½“ä¸­ã€‚<br />è¿™æ ·æœ‰åˆ©äºå‡å°‘å †ç©ºé—´ï¼Œè¿˜æœ‰æŒ‡é’ˆå¼•ç”¨çš„è¿‡ç¨‹ï¼Œå·²ç»å‡å°‘åƒåœ¾å›æ”¶çš„ä½œç”¨ã€‚

<a name="lZmWc"></a>
#### é€ƒé€¸åˆ†æ
å°±æ˜¯å¯¹è±¡è¢« å…¶ä»–çº¿ç¨‹ å¼•ç”¨ï¼Œæˆ–è€… å…¶ä»–æ ˆå¸§ï¼ˆæ–¹æ³•ï¼‰ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªå¯¹è±¡æŒ‡é’ˆå‘ç”Ÿäº†é€ƒé€¸ã€‚<br />jdk6å¼€å§‹æœ‰é€ƒé€¸åˆ†æã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634632570138-14797a15-35fe-4733-924b-91e257cf0d20.png#clientId=ufe45dbd7-bd54-4&from=paste&height=104&id=u097e0b16&margin=%5Bobject%20Object%5D&name=image.png&originHeight=82&originWidth=445&originalType=binary&ratio=1&size=44801&status=done&style=none&taskId=u3bcf44eb-962c-412e-8b61-ce56962892b&width=565.3238525390625)
<a name="ncMau"></a>
#### é€ƒé€¸çš„ä½œç”¨åŸŸ
æ ˆå¸§é€ƒé€¸ï¼šç®€å•æ¥è¯´ï¼Œå¯¹è±¡è¢«å…¶æ–¹æ³•ä½¿ç”¨äº†ï¼Œreturnè¿”å›å‡ºå»äº†ä¹Ÿç®—æ˜¯é€ƒé€¸ã€‚<br />çº¿ç¨‹é€ƒé€¸ï¼šç®€å•æ¥è¯´ï¼Œå¯¹è±¡è¢«å…¶ä»–çº¿ç¨‹ä½¿ç”¨äº†

![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634632409183-add9a0a0-a3e3-46cd-b5dc-264603fef1b1.png#clientId=ufe45dbd7-bd54-4&from=paste&height=289&id=u0abbecd2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=238&originWidth=458&originalType=binary&ratio=1&size=131578&status=done&style=none&taskId=ue873bb99-59b8-49dc-a2fc-cb55a72f17b&width=555.6335144042969)
<a name="GBGEe"></a>
### å¯¹è±¡åˆ†é…
![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634633131017-9caeed09-6377-4fd4-833c-5c0cf721044a.png#clientId=ufe45dbd7-bd54-4&from=paste&height=264&id=u20a2f4fd&margin=%5Bobject%20Object%5D&name=image.png&originHeight=231&originWidth=453&originalType=binary&ratio=1&size=107798&status=done&style=none&taskId=u8f337544-b405-43d4-a246-a3770a3e550&width=516.9857788085938)<br />**æ ˆä¸Šåˆ†é…ï¼š**<br />å¯¹è±¡ä¸€èˆ¬æ˜¯æ”¾åœ¨å †ç©ºé—´çš„ï¼Œä½†æ˜¯å¦‚æœ **å¼€å¯äº†** **é€ƒé€¸åˆ†æ**å’Œ æ ‡é‡æ›¿æ¢ï¼Œä¹Ÿèƒ½ç›´æ¥åœ¨æ ˆä¸Šé¢åˆ†é…ã€‚<br />**å †ä¸Šåˆ†é…ï¼š**<br />å¯¹è±¡æ­£å¸¸åœ¨EdenåŒºåˆ†é…ï¼Œæˆ–è€… å­—ç¬¦å¸¸é‡æ± ï¼Œæˆ–è€…å…ƒç©ºé—´åˆ†é…ã€‚éšç€åƒåœ¾å›æ”¶ç­‰æ“ä½œï¼Œå¯¹è±¡ä¼šå»ä¸åŒåœ°æ–¹ã€‚

è¿™é‡Œæ³¨æ„ä¸€ä¸‹ä»€ä¹ˆæ˜¯â€œ**æ ‡é‡æ›¿æ¢**â€ï¼Ÿ å…·ä½“æ˜¯å•¥ç©æ„ï¼Œçœ‹ä¸‹é¢ç« èŠ‚ã€‚

<a name="cXWDy"></a>
## æ ‡é‡æ›¿æ¢

ç›¸å½“äºåœ¨æ ˆå¸§ä¸­ï¼Œåˆ©ç”¨åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå’Œå¼•ç”¨ç±»å‹ï¼ŒæŠŠå¯¹è±¡é‡Œé¢å±æ€§å€¼ç»™æ›¿æ¢äº†ï¼Œå¯ä»¥åœ¨æ ˆä¸Šé¢åˆ›å»ºå¯¹è±¡ã€‚
> æ ‡é‡å¯ä»¥ç†è§£æˆä¸€ç§ä¸å¯åˆ†è§£çš„å˜é‡ï¼Œå¦‚javaå†…éƒ¨çš„åŸºæœ¬æ•°æ®ç±»å‹ã€å¼•ç”¨ç±»å‹ç­‰ã€‚ ä¸ä¹‹å¯¹åº”çš„èšåˆé‡æ˜¯å¯ä»¥è¢«æ‹†è§£çš„ï¼Œå¦‚å¯¹è±¡ã€‚


**æ ‡é‡æ›¿æ¢ï¼Œå¯¹è±¡ä¸é€ƒé€¸ çš„å¥½å¤„ å°±æ˜¯ï¼š**

- å‡å°‘å †å†…å­˜ï¼Œç›´æ¥åœ¨æ ˆä¸Šåˆ†é…ã€‚ï¼ˆæ ˆå†…å­˜é»˜è®¤2Mï¼‰
- è¿è¡Œè¿‡ç¨‹ä¸­å‡å°‘äº†å¯¹è±¡å¼•ç”¨çš„éº»çƒ¦ï¼Œé€Ÿåº¦æ›´å¿«ã€‚
- æ ˆå¼¹å‡ºæ¥åï¼Œå°±é”€æ¯äº†ï¼Œä¸ç”¨GCåƒåœ¾å›æ”¶å™¨ä»‹å…¥

![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634635686378-190a392a-cbe3-4bab-acac-4ec8f0fb1012.png#clientId=ufe45dbd7-bd54-4&from=paste&height=283&id=ubb7e0151&margin=%5Bobject%20Object%5D&name=image.png&originHeight=242&originWidth=465&originalType=binary&ratio=1&size=124135&status=done&style=none&taskId=ub393697b-8ed6-4651-9e39-acdf56ab0dc&width=544)
<a name="S8QoT"></a>
## 
<a name="s2mOR"></a>
## åŒæ­¥æ¶ˆé™¤
å¯ä»¥ç†è§£ä¸ºï¼š<br />å¼€å¯é€ƒé€¸åˆ†æåï¼Œå¦‚æœå¯¹è±¡ä¸ºçº¿ç¨‹çº§åˆ«çš„ä½œç”¨åŸŸï¼Œæ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹ä½¿ç”¨ï¼Œé‚£å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚é‚£ä¹ˆï¼Œå¦‚æœä»£ç ä¸­è¿™ä¸ªå¯¹è±¡è¢«å½“åšä¸ºâ€œåŒæ­¥é”å¯¹è±¡â€ï¼Œé‚£ä¹ˆåœ¨ç¼–è¯‘æ—¶å°±ä¼šå–æ¶ˆåŠ é”ã€‚æ¯”å¦‚ç¼–è¯‘çš„æ—¶å€™å°±ä¸ä¼šç”Ÿæˆmonitorenterï¼Œmonitorexist è¿™æ ·çš„å…³é”®å­—ï¼Œå› ä¸ºæœ¬æ¥å°±çº¿ç¨‹å®‰å…¨ï¼Œä½•å¿…å¤šæ­¤ä¸€ä¸¾å‘¢ã€‚

> é€šè¿‡-XX:+EliminateLockså¯ä»¥å¼€å¯åŒæ­¥æ¶ˆé™¤,è¿›è¡Œæµ‹è¯•æ‰§è¡Œçš„æ•ˆç‡
> åŒæ­¥æ¶ˆé™¤æ˜¯javaè™šæ‹Ÿæœºæä¾›çš„ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ã€‚æ¶ˆé™¤çš„å…¶å®æ˜¯å¯¹è±¡çš„åŒæ­¥é”ï¼Œå †è¢«çº¿ç¨‹å…±äº«ï¼Œé‚£ä¹ˆå †ä¸Šé¢çš„å¯¹è±¡ä¹Ÿä¼šè¢«çº¿ç¨‹å…±äº«ï¼Œè¯»å†™ä¼šå‡ºç°åŒæ­¥çš„å¹¶å‘é—®é¢˜ï¼Œæ‰€ä»¥å¯¹è±¡ä¹ŸåŠ äº†synchronizedåŒæ­¥é”ã€‚ä½†æ˜¯æ ˆæ˜¯çº¿ç¨‹ç‹¬äº«çš„ï¼Œå¦‚æœè¿›è¡Œæ ˆä¸Šåˆ†é…ï¼Œé‚£ä¹ˆå°±æ ¹æœ¬ä¸éœ€è¦åŒæ­¥é”ï¼Œæé«˜äº†æ‰§è¡Œæ•ˆç‡ã€‚è¿™å°±æ˜¯åŒæ­¥æ¶ˆé™¤ã€‚

![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634636263387-6845b215-f245-4e81-8647-4257a86dee14.png#clientId=ufe45dbd7-bd54-4&from=paste&height=280&id=u9e7d1f75&margin=%5Bobject%20Object%5D&name=image.png&originHeight=217&originWidth=338&originalType=binary&ratio=1&size=88496&status=done&style=none&taskId=u8fdcc456-c19a-4d34-be36-aa9ea78b308&width=435.647705078125)
<a name="zGGxK"></a>
## æŒ‡é’ˆå‹ç¼©
ç®€å•æ¥è¯´å¯¹JVMä¸­æ‰€æœ‰çš„å¼•ç”¨æŒ‡é’ˆï¼ˆç±»å‹æŒ‡æ­£ï¼Œå †å¼•ç”¨æŒ‡é’ˆï¼Œæ ˆå¸§ä¸­çš„å˜é‡æŒ‡é’ˆ ä»¥åŠ é”è®°å½•æŒ‡é’ˆç­‰ç­‰ï¼‰ï¼Œéƒ½åšäº†å‹ç¼©ï¼Œåœ¨JDK1.7åé»˜è®¤å¼€å¯ã€‚ç›®çš„æ˜¯ä¸ºäº†åœ¨64ä½çš„è™šæ‹Ÿæœºä¸­æå‡å†…å­˜ä½¿ç”¨ç‡ã€‚

ç‰©æå¿…åï¼Œæœˆåœ†å¿…ç¼ºï¼ ä¹Ÿ**ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼šæŒ‡é’ˆå‹ç¼©å¤±æ•ˆ**<br />æŒ‡é’ˆè¢«å‹ç¼©åˆ°32bitä¹‹åï¼Œæœ€å¤§å¯»å€ä¸º32GBï¼Œå½“å¦‚æœä½ å †å†…å­˜è¶…è¿‡32Gæ—¶ï¼Œå‡ºç°äº†OOMï¼Œå†…å­˜æ‰©å¤§åˆ°48Gæ—¶ä¸€æ ·ä¹Ÿå¯èƒ½å‡ºç°OOMï¼Œå› ä¸ºå†…å­˜è¶…è¿‡32GBæ˜¯ï¼Œ32Bitçš„æŒ‡æ­£æ— æ³•å¯»å€ï¼Œä¼šå¤±æ•ˆã€‚<br />**å…³é”®å­—ï¼š**<br />**å †å†…å­˜è¶…è¿‡32Gï¼Œæ— æ³•å¯»å€ï¼ŒæŒ‡é’ˆè†¨èƒ€ï¼Œ æŒ‡é’ˆå¤±æ•ˆï¼Œå‡ºç°OOMã€‚**
<a name="fiWOF"></a>
## ![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634636857212-d735642d-b183-401d-be91-639dc9ffee89.png#clientId=ufe45dbd7-bd54-4&from=paste&height=298&id=u4f43e1bb&margin=%5Bobject%20Object%5D&name=image.png&originHeight=239&originWidth=746&originalType=binary&ratio=1&size=216550&status=done&style=none&taskId=u8b1bfee0-e76a-450e-b2a6-3d94d70c14f&width=929.9971313476562)
<a name="Jb0B7"></a>
## synchronizedé”çš„è†¨èƒ€
<a name="u6OA3"></a>
#### é”å‡çº§çš„æµç¨‹å›¾
åº•å±‚åŸç†å°±ä¸å¤šBBäº†ï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹é”çš„å‡çº§è¿‡ç¨‹ã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634645096228-eeaaee8b-56f2-40e1-bed0-68df9bbefaf3.png#clientId=u72e36da2-7449-4&from=paste&id=bhRE0&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1807&originWidth=3867&originalType=binary&ratio=1&size=2041587&status=done&style=none&taskId=uc9ffe8f6-ad48-4897-8136-0078f98a146)<br />JDK1.6ä»¥å‰synchronized å…³é”®å­—åªè¡¨ç¤ºé‡é‡çº§é”ï¼ˆä¾èµ–äºæ“ä½œç³»ç»Ÿçš„Mutexçº¿ç¨‹æŒ‚èµ·ï¼Œæ‰€ä»¥æ•ˆç‡ä½ï¼‰<br />JDK1.6ä¹‹ååŒºåˆ†ä¸ºåå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”ã€‚
<a name="FgF8G"></a>
#### å…³é”®å­—ï¼š
åº•å±‚é‡‡ç”¨å¤§é‡çš„ CASæ“ä½œã€‚<br />åå‘é”ï¼šMWdåŒºåŸŸä¸­çš„ è½»é‡çº§é”ID<br />è½»é‡çº§é”ï¼šMarkWordåŒºåŸŸçš„ è½»é‡çº§é”æŒ‡é’ˆã€‚ä»¥åŠMWä¸­æ‹·è´åˆ°æ ˆå¸§ä¸­çš„â€œé”è®°å½•â€ã€‚<br />é‡é‡çº§é”ï¼šæ“ä½œç³»ç»Ÿä¸­çš„Mutexäº’æ–¥åŸåˆ™å»æŒ‚èµ·çº¿ç¨‹ã€‚

åšå®¢å‚è€ƒï¼š[https://blog.csdn.net/hanghangaidoudou/article/details/113561482](https://blog.csdn.net/hanghangaidoudou/article/details/113561482)
> é”çš„å‡çº§ã€é™çº§ï¼Œå°±æ˜¯ JVMä¼˜åŒ– synchronized è¿è¡Œçš„æœºåˆ¶ï¼Œå½“ JVM æ£€æµ‹åˆ°ä¸åŒçš„ç«äº‰çŠ¶å†µæ—¶ï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°é€‚åˆçš„é”å®ç°ï¼š
> - å½“æ²¡æœ‰ç«äº‰å‡ºç°æ—¶ï¼Œé»˜è®¤ä¼šä½¿ç”¨åå‘é”ã€‚JVM ä¼šåˆ©ç”¨ **CAS æ“ä½œ**ï¼ˆcompare and swapï¼‰ï¼Œåœ¨å¯¹è±¡å¤´ä¸Šçš„ **Mark Word éƒ¨åˆ†è®¾ç½®çº¿ç¨‹ ID**ï¼Œä»¥è¡¨ç¤ºè¿™ä¸ªå¯¹è±¡åå‘äºå½“å‰çº¿ç¨‹ï¼Œæ‰€ä»¥å¹¶ä¸æ¶‰åŠçœŸæ­£çš„äº’æ–¥é”ã€‚è¿™æ ·åšçš„å‡è®¾æ˜¯åŸºäºåœ¨å¾ˆå¤šåº”ç”¨åœºæ™¯ä¸­ï¼Œå¤§éƒ¨åˆ†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸä¸­æœ€å¤šä¼šè¢«ä¸€ä¸ªçº¿ç¨‹é”å®šï¼Œä½¿ç”¨åå‘é”å¯ä»¥é™ä½æ— ç«äº‰å¼€é”€ã€‚
> - å¦‚æœæœ‰å¦å¤–çš„çº¿ç¨‹è¯•å›¾é”å®šæŸä¸ªå·²ç»è¢«åå‘è¿‡çš„å¯¹è±¡ï¼ŒJVM å°±éœ€è¦æ’¤é”€ï¼ˆrevokeï¼‰åå‘é”ï¼Œå¹¶åˆ‡æ¢åˆ°è½»é‡çº§é”å®ç°ã€‚**è½»é‡çº§é”** ä¾èµ– CAS æ“ä½œ Mark Word æ¥è¯•å›¾è·å–é”ï¼Œå¦‚æœé‡è¯•æˆåŠŸï¼Œå°±ä½¿ç”¨è½»é‡çº§é”ï¼›å¦åˆ™ï¼Œè¿›ä¸€æ­¥å‡çº§ä¸ºé‡é‡çº§é”

<a name="Mb2MA"></a>
#### ä¸Šé”çš„è¿‡ç¨‹
æ— é” ->  åå‘é”  -> è½»é‡é”  -> é‡é‡çº§é”

ç®€å•æ¥è¯´å°±æ˜¯**ï¼š**<br />**ï¼ˆåŒæ­¥æ¶ˆé™¤ é˜¶æ®µï¼‰**

- ç¼–è¯‘å‰ä¼šæœ‰â€œ**åŒæ­¥æ¶ˆé™¤**â€çš„åˆ¤æ–­ï¼Œåˆ¤æ–­é”å¯¹è±¡çš„ä½¿ç”¨åŸŸæ˜¯å¦åœ¨ä¸€ä¸ªçº¿ç¨‹å†…ã€‚å®‰å…¨å°±ä¸éœ€è¦åŠ é”ã€‚

ï¼ˆåå‘é” é˜¶æ®µï¼‰

- é”å¯¹è±¡é¦–å…ˆæ˜¯å¤„äº**â€œåå‘é”â€**ï¼Œè¿™ç§æ˜¯é æŠŠ å¯¹è±¡å¤´MarkWordå†…å­˜ ä¸­çš„  **åå‘é”çº¿ç¨‹ID** ä¿®æ”¹ä¸ºè‡ªå·±çš„ã€‚
   - ä¿®æ”¹çš„ **åå‘é”çº¿ç¨‹ID** è¿‡ç¨‹æ˜¯ç”¨ CAS ä¹è§‚é”æœºåˆ¶ã€‚

ï¼ˆè½»é‡çº§é” é˜¶æ®µï¼‰

- å½“æœ‰å…¶ä»–çº¿ç¨‹æƒ³è¦è·å–é”æ—¶ï¼Œä¼šå‡çº§ä¸º**â€œè½»é‡çº§é”â€ï¼Œ**æ­¤æ—¶ä¼šæŠŠMarkWordçš„ä¸­çš„é”æ ‡è®° æ‹·è´ åˆ°è‡ªå·±çš„æ ˆå¸§ä¸­çš„â€œé”è®°å½•â€ï¼ˆlock recordï¼‰ä¸”è®©å¯¹è±¡å¤´MarkWordä¸­çš„ â€œ**è½»é‡çº§é”æŒ‡é’ˆâ€** æŒ‡å‘ä½ çš„æ ˆå¸§ä¸­ã€‚
   - å¤åˆ¶è¿‡ç¨‹ï¼ŒæŒ‡é’ˆæŒ‡å‘è¿‡ç¨‹éƒ½æ˜¯é‡‡ç”¨CASæœºåˆ¶ã€‚

ï¼ˆé‡é‡çº§é” é˜¶æ®µï¼‰

- å½“ä¸Šé¢å‡ºç°æŠŠâ€œè½»é‡çº§é”æŒ‡é’ˆâ€ æŒ‡å‘æ ˆæ—¶ï¼Œå¦‚æœå¤±è´¥ï¼Œå°±ä¸æ–­è‡ªæ—‹æ“ä½œã€‚		ï¼ˆé‡é‡çº§é”çš„å‡ºç°è¿‡ç¨‹ï¼Ÿï¼‰
   - é»˜è®¤ä¼šè‡ªé€‰10æ¬¡ï¼ˆå¯è°ƒèŠ‚ï¼‰ï¼Œè¶…è¿‡æ¬¡æ•°å°±æ™‹çº§ä¸º â€œé‡é‡çº§é”â€
   - æˆ– ç«äº‰é”çº¿ç¨‹ è¶…è¿‡CPUæ ¸æ•°çš„ä¸€åŠæ—¶ï¼Œä¼šå‡çº§æˆ â€œé‡é‡çº§é”â€ã€‚
   - æˆ–è€… ç›´æ¥è°ƒç”¨ wait() æ–¹æ³•ä¹Ÿæ˜¯ç›´æ¥å˜æˆ é‡é‡çº§é”ã€‚
   - JDK1.6ä¹‹å‰é»˜è®¤éƒ½æ˜¯é‡é‡çº§é”

**é‡é‡çº§é”å®ç°åŸç†çš„å‡ ä¸ªå…³é”®å­—ï¼Ÿ**

- å¯¹è±¡å¤´ä¸­MarkWordåŒºåŸŸå†…æœ‰æŒ‡å‘ **é‡é‡çº§é”æŒ‡é’ˆ**ï¼ˆæŒ‡å‘ç›‘è§†å™¨å¯¹è±¡Monitorçš„æŒ‡é’ˆï¼‰ï¼Œé è¿™ç©æ„å»å®ç°é”ã€‚
- åº•å±‚é‡‡ç”¨æ“ä½œç³»ç»Ÿ Mutex (äº’æ–¥) åŸåˆ™æŒ‚èµ·å½“å‰çº¿ç¨‹ã€‚

![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1634644785195-3eb14b64-2319-4f27-a402-6e7084b5db69.png#clientId=u72e36da2-7449-4&from=paste&height=555&id=u4a004243&margin=%5Bobject%20Object%5D&name=image.png&originHeight=814&originWidth=1547&originalType=binary&ratio=1&size=995065&status=done&style=none&taskId=ue254c7d0-6088-4ac7-ada9-95fe4936ee6&width=1054.9971313476562)


<a name="QuLcI"></a>
#### 
