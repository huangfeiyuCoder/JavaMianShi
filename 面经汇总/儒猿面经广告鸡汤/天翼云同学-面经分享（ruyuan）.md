<a name="WIEJZ"></a>
## 背景
10年经验，31岁，大专毕业，自考本科，技术一般，进入独角兽
<a name="myx4f"></a>
## 学习内容
时间安排<br />周⼀到周五午休和下班后的整块时间，以及地铁上的零碎时间。周末全天学习。<br />学习内容<br />架构班主JAVA+辅⼤数据，部分课程重复重修，儒猿技术窝全部课程。<br />Java推荐的学习顺序<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1631706088058-1fbfaf6d-7657-4654-91f4-2a2f95b2c27b.png#clientId=u0a23ece1-1579-4&from=paste&height=365&id=u087226b4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=730&originWidth=1137&originalType=binary&ratio=1&size=1043125&status=done&style=none&taskId=u359052fa-1174-4ef9-a9fe-c98d0a59ba2&width=568.5)<br />大数据推荐的学习顺序<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1631706110240-fa31d625-033e-4d57-98c3-b3930ded3d0d.png#clientId=u0a23ece1-1579-4&from=paste&height=193&id=ue2903bf2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=386&originWidth=855&originalType=binary&ratio=1&size=381389&status=done&style=none&taskId=u5fb556ff-c148-4ab9-9af2-ad885e89845&width=427.5)
<a name="k7DjZ"></a>
## 学习笔记
1、《从 0 开始带你成为JVM实战⾼⼿》<br />笔记：http://note.youdao.com/noteshare?id=30d822dad76304f5fda97fe8caf43f20 

2、《从零开始带你成为MySQL实战优化⾼⼿》专栏部分流程图： <br />原图链接：https://www.processon.com/view/link/60ad1fe707912906fbd3c402

3、架构班并发JUC部分流程图：<br />原图链接：https://www.processon.com/view/link/5f13f8c8e401fd06f3e26eb5 

4、架构班分布式事务笔记：<br />笔记：http://note.youdao.com/noteshare?id=d4b563faeb73d1baea957aa177a194ae <br />   <br />5、架构班Kafka源码部分<br />原图链接：https://www.processon.com/view/link/5f340b0ae401fd51f06ce835

6、Zk源码部分：<br />原图链接：https://www.processon.com/view/link/5f13a2da1e08537d50b2bb42 

7、秒杀流程图：<br />原图链接：https://www.processon.com/view/link/5f0b28ab5653bb6858b70f4e 

<a name="QDFu0"></a>
## 面试部分
4个⽉左右，前3⽉需要⽤来复习，差缺补漏，⾯⼀些不想去的公司或者更⾼端的职业来看⾃⼰的不⾜

<a name="OMiNf"></a>
## 简历指导
改造前的简历<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1631706513396-73dda962-3eef-4eb7-bdc5-515071c5b749.png#clientId=u0a23ece1-1579-4&from=paste&height=623&id=u88905ef1&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1246&originWidth=1176&originalType=binary&ratio=1&size=1338622&status=done&style=none&taskId=u9fdf750b-458b-4b2e-80f5-ba059c0151d&width=588)<br />改造后的简历<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1631706544293-68e10fc0-e447-44a6-9567-f7c1be396d17.png#clientId=u0a23ece1-1579-4&from=paste&height=576&id=u9fc319d4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1152&originWidth=1254&originalType=binary&ratio=1&size=1318740&status=done&style=none&taskId=uea611ed4-cef6-4d86-8930-f2830f59f99&width=627)<br />![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1631706555728-d385a915-d4a3-4c78-9c4a-76ed047db832.png#clientId=u0a23ece1-1579-4&from=paste&height=669&id=ubb576503&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1338&originWidth=1236&originalType=binary&ratio=1&size=1306548&status=done&style=none&taskId=u2d29088f-3aee-47f6-b46d-64de6956612&width=618)

<a name="dWwJ4"></a>
## 面试公司整理
![image.png](https://cdn.nlark.com/yuque/0/2021/png/1461694/1631706591649-ece8dcb4-10ed-4de1-81b2-094416a406f0.png#clientId=u0a23ece1-1579-4&from=paste&height=326&id=ud1cc7543&margin=%5Bobject%20Object%5D&name=image.png&originHeight=652&originWidth=1156&originalType=binary&ratio=1&size=401606&status=done&style=none&taskId=ua48c71a5-f41a-4809-bda6-6e822c5c8c0&width=578)<br />⾯试之前原理性的课程必看，要能⾃⼰讲出来原理，突击1-3必备，JVM，MQ(其中⼀个必备)，mysql 必备，⾯试突击⼀针对普遍性问题，突击⼆，可以帮助你修改简历，突击三：基础性问题，另外多刷题，多总结，⾯试前可以尝试录⾳，回来路上多听，问题出在哪⾥ 
<a name="la0bE"></a>
## 问题总结
**1、索引的底层数据结构 **<br />为什么⽤的是B+ 不⽤B- ？还了解哪些树根据磁盘查找存取的次数往往由树的⾼度所决定，所以，只要我们通过某种较好的树结构减少树的结构尽量减少树的⾼度“⾸先你要回答出mysql中索引采⽤的是B+树结构，然后把B+树的结构描述下，延伸到索引下推，索引覆盖，聚簇索引、辅助索引等等。 <br />1)、Hash哈希，只适合等值查询，不适合范围查询。 <br />2)、⼀般⼆叉树，可能会特殊化为⼀个链表，相当于全表扫描。 <br />3)、红⿊树，是⼀种特化的平衡⼆叉树，MySQL 数据量很⼤的时候，索引的体积也会很⼤，内存放不下的⽽从磁盘读取，树的层次太⾼的话，读取磁盘的次数就多了。 <br />4)、B-Tree，叶⼦节点和⾮叶⼦节点都保存数据，相同的数据量，B+树更矮壮，也是就说，相同的数 据量，B+树数据结构，查询磁盘的次数会更少。 然后关于explain你要回答出⼀下⼏个核⼼字段，序号、type、possible_keys、Key、rows、extra，及每个字段有哪些常⻅的项 

**2、如何进⾏分库分表 **<br />分库分表的原理：将⼀个库⾥⾯分配到多个库⾥⾯ <br />垂直切分：垂直拆分⼀般是按照业务和功能的维度进⾏拆分，把数据分别放到不同的数据库中。 <br />⽔平切分：⽔平拆分是把相同的表结构分散到不同的数据库和不同的数据表中，避免访问集中的单个数据库或者单张数据表，具体的分库和分表规则，⼀般是通过业务主键，进⾏哈希取模操作。 

**3、redis 的数据结构，redis 过期缓存的侧率 **<br />五种数据结构： <br />字符串： key-value <br />列表(List)：是链表-双向链表 ，列表类型 <br />哈希(hash)：多个键值的映射， <br />集合(Set) ： 可以⽤作某些去重功能， <br />有序集合(zset) ：有序集合，可以使⽤范围查找，排⾏榜功能或者topN功能 

**4、es itf 算法 倒排索引** <br />通常是通过检索⽂章，逐个找到对应的关键字的为倒排索引 通过分词，形成词和⽂章的关联 词典+映射表即为倒排索引TF-IDF算法评估⼀个词语在⼀个⽂件中的重要程度 如果某个词或短语在⼀篇⽂章中出现的频率TF⾼，并且在其他⽂章中很少出现，则认为此词或者短语具有很好的类别区分能⼒，适合⽤来分类TF-IDF TF ： 词语在该⽂件中出现的次数 IDF：可以由总⽂件数⽬除以包含该词语之⽂件的数⽬，再将得到的商取对数得到 

**5、JVM G1和CMS 的执⾏过程 和区别 **<br />区别⼀： 使⽤范围不⼀样 

- CMS收集器是⽼年代的收集器，可以配合新⽣代的Serial和ParNew收集器⼀起使⽤ 
- G1收集器收集范围是⽼年代和新⽣代。不需要结合其他收集器使⽤ 

区别⼆： STW的时间 

- CMS收集器以最⼩的停顿时间为⽬标的收集器。 
- G1收集器可预测垃圾回收的停顿时间（建⽴可预测的停顿时间模型） 

区别三： 垃圾碎⽚ <br />CMS收集器是使⽤<br />“标记-清除”算法进⾏的垃圾回收，容易产⽣内存碎⽚。 <br />G1收集器使⽤的是“标记-整理”算法，进⾏了空间整合，降低了内存空间碎⽚。

- 初始标记阶段：会让线程全部停⽌，也就是 Stop the World 状态，标记GC Roots 可以直接关联的对象，该阶段需要线程停顿但是耗时短 
- 并发标记阶段：对所有的对象进⾏追踪，这个阶段最耗费时。但这个阶段是和系统并发运⾏的，所以不会对系统运⾏造成影响 
- 重新标记阶段：由于第⼆阶段是并发执⾏的，⼀边标记垃圾对象，⼀边创建新对象，⽼对象会变成垃圾对象。 所以第三阶段也会进⼊ Stop the World 状态，并且重新标记，标记的是第⼆阶段中变动过的少数对象，所以运⾏速度很快 
- 并发清理阶段： 这个阶段也是会耗费很多时间，但由于是并发运⾏的，所以对系统不会造成很⼤的影响 
- 并发标记：寻找存活的对象，可以与其他程序并发执⾏，耗时较⻓ 

最终标记：并发标记期间⽤户程序会导致标记记录产⽣变动（好⽐⼀个阿姨⼀边清理垃圾，另⼀个⼈⼀边扔垃圾）虚拟机会将这段时间的变化记录在Remembered Set Logs 中。<br />最终标记阶段会向Remembered Set合并并发标记阶段的变化。这个阶段需要线程停顿，也可以并发执⾏筛选回收：对每个Region的回收成本进⾏排序，按照⽤户⾃定义的回收时间来制定回收计划 

**6、什么情况下应该考虑使⽤G1 **<br />参考官⽅⽂档： <br />实时数据占⽤超过⼀半的堆空间 <br />对象分配或者晋升的速度变化⼤ <br />希望消除⻓时间的GC停顿（超过0.5-1秒） 

**7、LRU 算法和缓存过期机制 **<br />out）：先进先出，淘汰最先近来的⻚⾯，新进来的⻚⾯最迟被淘汰，完全符合队列。<br />2.LRU（Least recently used）：最近最少使⽤，淘汰最近不使⽤的⻚⾯ <br />3.LFU（Least frequently used）： 最近使⽤次数最少， 淘汰使⽤次数最少的⻚⾯ 

**8、 缓存雪崩缓存穿透解决⽅案** 

- 缓存雪崩： 和数据库不⼀致 
- 缓存穿透：数据库没有，判断是否为空直接返回 
- 缓存击穿：缓存击穿实际上是缓存雪崩的⼀个特例，缓存击穿是指缓存中没有但数据库中有的数据（⼀般是缓存时间到期），这时由于并发⽤户特别多，同时读缓存没读到数据，⼜同时去数据库去取数据， 引起数据库压⼒瞬间增⼤，造成过⼤压⼒。击穿与雪崩的区别即在于击穿是对于某⼀特定的热点数据来说，⽽雪崩是全部数据。 

解决⽅案： <br />1、设置key永远不过期，或者快过期时，通过另⼀个异步线程重新设置key <br />2、双重校验（Dubbo Check）类似线程安全的懒汉单例模式实现，保证只会有⼀个线程去访问数据库缓存

**9、和数据库双写⼀致性⽅案， ⼤促场景下的 redis 缓存超卖⽅案 **

**10、RocketMQ 基本架构原理， Broker ⾼可⽤、 ⾼性能机制， raft 协议选举与 Dledger 主从同步机制**<br />RocketMQ 的事务消息机制， 能够基于具体业务场景灵活运⽤ RocketMQ， 确保消息 0 丢失， 顺序 性， 幂等性等 

**11、 redis 和 zookeeper 分布式锁原理 **

**12、ZAB 和 Paxos 算法的联系与区别？ **<br />相同点： <br />（1）两者都存在⼀个类似于 Leader 进程的⻆⾊，由其负责协调多个 Follower 进程的运⾏ <br />（2）Leader 进程都会等待超过半数的 Follower 做出正确的反馈后，才会将⼀个提案进⾏提交 <br />（3）ZAB 协议中，每个 Proposal 中都包含⼀个 epoch 值来代表当前的 Leader周期，Paxos 中名字为 Ballot <br />不同点：<br />（1）ZAB ⽤来构建⾼可⽤的分布式数据主备系统（Zookeeper），Paxos 是⽤来构建分布式⼀致性状态机系统。 
